<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Measurement System Analysis | industRial data science</title>
  <meta name="description" content="Measurement System Analysis | industRial data science" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Measurement System Analysis | industRial data science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/img/cover3.png" />
  
  <meta name="github-repo" content="J-Ramalho/industRialds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Measurement System Analysis | industRial data science" />
  
  
  <meta name="twitter:image" content="/img/cover3.png" />

<meta name="author" content="João Ramalho" />


<meta name="date" content="2021-06-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="design-for-six-sigma.html"/>
<link rel="next" href="DOE.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122820355-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-122820355-1');
</script>


<script type="text/javascript">
mattcrump=1;
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/industRialds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">industRial</a></li>

<li class="divider"></li>
<li class="part"><span><b>I INTRODUCTION</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html"><i class="fa fa-check"></i>Toolbox</a>
<ul>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#r-and-rstudio"><i class="fa fa-check"></i>R and RStudio</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#packages"><i class="fa fa-check"></i>Packages</a>
<ul>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#highlights"><i class="fa fa-check"></i>Highlights</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#datasets"><i class="fa fa-check"></i>Datasets</a></li>
<li class="chapter" data-level="" data-path="toolbox.html"><a href="toolbox.html#functions"><i class="fa fa-check"></i>Functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tutorials.html"><a href="tutorials.html"><i class="fa fa-check"></i>Tutorials</a>
<ul>
<li class="chapter" data-level="" data-path="tutorials.html"><a href="tutorials.html#on-the-web"><i class="fa fa-check"></i>On the web</a></li>
<li class="chapter" data-level="" data-path="tutorials.html"><a href="tutorials.html#locally"><i class="fa fa-check"></i>Locally</a></li>
</ul></li>
<li class="part"><span><b>II CASE STUDIES</b></span></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html"><i class="fa fa-check"></i>Design for Six Sigma</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#pareto-analysis"><i class="fa fa-check"></i>Pareto analysis</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#collecting-defects"><i class="fa fa-check"></i>Collecting defects</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#paretochart"><i class="fa fa-check"></i>Pareto chart</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#root-cause-analysis"><i class="fa fa-check"></i>Root cause analysis</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#brainstorming"><i class="fa fa-check"></i>Brainstorming</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#ishikawa"><i class="fa fa-check"></i>Ishikawa digram</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#correlations"><i class="fa fa-check"></i>Correlations</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#matrix"><i class="fa fa-check"></i>Matrix</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#tileplot"><i class="fa fa-check"></i>Tileplot</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#clustering"><i class="fa fa-check"></i>Clustering</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#clustering-algorithms"><i class="fa fa-check"></i>Clustering algorithms</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#network_plot"><i class="fa fa-check"></i>Network plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html"><i class="fa fa-check"></i>Measurement System Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#calibration"><i class="fa fa-check"></i>Calibration</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#bias_plot"><i class="fa fa-check"></i>Bias plot</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#bias_report"><i class="fa fa-check"></i>Bias report</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#precision"><i class="fa fa-check"></i>Precision</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#gageRnR"><i class="fa fa-check"></i>Gage r&amp;R</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#gage_acceptance"><i class="fa fa-check"></i>Gage acceptance</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#gage-plots"><i class="fa fa-check"></i>Gage plots</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#negative-variance"><i class="fa fa-check"></i>Negative variance</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#custom-functions"><i class="fa fa-check"></i>Custom functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#uncertainty"><i class="fa fa-check"></i>Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html"><i class="fa fa-check"></i>Design of Experiments</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#direct-comparisons"><i class="fa fa-check"></i>Direct comparisons</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#histogram"><i class="fa fa-check"></i>Histogram</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#t.test"><i class="fa fa-check"></i>t-test one sample</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#geom_qq"><i class="fa fa-check"></i>Normality plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#var.test"><i class="fa fa-check"></i>F-test</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#levene.test"><i class="fa fa-check"></i>Levene test</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#t-test-two-samples"><i class="fa fa-check"></i>t-test two samples</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#statistical-modeling"><i class="fa fa-check"></i>Statistical modeling</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#lm"><i class="fa fa-check"></i>Linear models</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#contr.treatment"><i class="fa fa-check"></i>Contrasts</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#predict"><i class="fa fa-check"></i>Predict</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#augment"><i class="fa fa-check"></i>Model augment</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#residuals_timeseries"><i class="fa fa-check"></i>Timeseries plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#autocorrelation"><i class="fa fa-check"></i>Autocorrelation test</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#normality-plot"><i class="fa fa-check"></i>Normality plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#shapiroTest"><i class="fa fa-check"></i>Normality test</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#residuals_fit"><i class="fa fa-check"></i>Residuals-Fit plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#std_residuals_fit"><i class="fa fa-check"></i>Standard Residuals-Fit plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#std_residuals_factors"><i class="fa fa-check"></i>Standard Residuals-Factor plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#homocedasticity"><i class="fa fa-check"></i>Homocedasticity</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#outliers"><i class="fa fa-check"></i>Outliers test</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#cooks"><i class="fa fa-check"></i>Cooks distance</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#R-squared"><i class="fa fa-check"></i>R-squared</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#effects-significance"><i class="fa fa-check"></i>Effects significance</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#aov"><i class="fa fa-check"></i>Anova</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#tukey"><i class="fa fa-check"></i>Pairwise comparison</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#fisherLSD"><i class="fa fa-check"></i>Least significant difference</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interactions"><i class="fa fa-check"></i>Interactions</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#formula"><i class="fa fa-check"></i>Model formulae</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#RSE"><i class="fa fa-check"></i>Residuals standard error</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#plot.lm"><i class="fa fa-check"></i>Residuals summary</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interaction.plot"><i class="fa fa-check"></i>Interaction plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova"><i class="fa fa-check"></i>Anova with interactions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#covariance"><i class="fa fa-check"></i>Covariance</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#cor.test"><i class="fa fa-check"></i>Correlation test</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#ancova_aov"><i class="fa fa-check"></i>Ancova</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#general-designs"><i class="fa fa-check"></i>General designs</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#fac.design"><i class="fa fa-check"></i>Factorial design</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#main_effects"><i class="fa fa-check"></i>Main effects plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interaction_plot"><i class="fa fa-check"></i>Interaction plots (custom)</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#formula_expansion"><i class="fa fa-check"></i>Formula expansion</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova_three"><i class="fa fa-check"></i>Anova with 3rd level interactions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#two-level-designs"><i class="fa fa-check"></i>Two level designs</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#factorial-design-2-levels"><i class="fa fa-check"></i>Factorial design 2 levels</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#coding_levels"><i class="fa fa-check"></i>Coding levels</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#plotMeans"><i class="fa fa-check"></i>Interaction plots with SE</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#adj_Rsquare"><i class="fa fa-check"></i>Adjusted R-squared</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#coding_inputs"><i class="fa fa-check"></i>Coding inputs</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#coded_prediction"><i class="fa fa-check"></i>Coded prediction</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#persp"><i class="fa fa-check"></i>Perspective plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#single_replicate"><i class="fa fa-check"></i>Single replicate</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#qqPlot"><i class="fa fa-check"></i>Effects normal plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#effects_contribution"><i class="fa fa-check"></i>Effects contribution table</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#reduced-model"><i class="fa fa-check"></i>Reduced model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html"><i class="fa fa-check"></i>Statistical Process Control</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#xbar-r-charts"><i class="fa fa-check"></i>xbar-R charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#xbar_chart"><i class="fa fa-check"></i>Mean chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#Rchart"><i class="fa fa-check"></i>Range chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#limits.xbar"><i class="fa fa-check"></i>Warning limits</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#cpk-charts"><i class="fa fa-check"></i>Cpk charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#off_spec"><i class="fa fa-check"></i>Off spec</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#process_Cpk"><i class="fa fa-check"></i>Process Capability</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#sigma_table"><i class="fa fa-check"></i>Sigma conversion table</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#process.capability"><i class="fa fa-check"></i>Capability chart</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#i-mr-charts"><i class="fa fa-check"></i>I-MR charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#process_stats"><i class="fa fa-check"></i>Process statistics</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#chart_I"><i class="fa fa-check"></i>Individual chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#chart_IMR"><i class="fa fa-check"></i>Moving range chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#chart_Cpk"><i class="fa fa-check"></i>Capability chart (custom)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III APPENDIX</b></span></li>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html"><i class="fa fa-check"></i>Index</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a>
<ul>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#statistics"><i class="fa fa-check"></i>Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#notation-conventions"><i class="fa fa-check"></i>Notation conventions</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#probability"><i class="fa fa-check"></i>Probability</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#statistical-inference"><i class="fa fa-check"></i>Statistical Inference</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#linear-models"><i class="fa fa-check"></i>Linear models</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#dfss"><i class="fa fa-check"></i>DFSS</a>
<ul>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#voice-of-customer"><i class="fa fa-check"></i>Voice of Customer</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#voice-of-process"><i class="fa fa-check"></i>Voice of Process</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#msa"><i class="fa fa-check"></i>MSA</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#doe"><i class="fa fa-check"></i>DOE</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#spc"><i class="fa fa-check"></i>SPC</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="imprint.html"><a href="imprint.html"><i class="fa fa-check"></i>Imprint</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">indust<b style='color:#38598CFF'>R</b>ial data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="MSA" class="section level1">
<h1>Measurement System Analysis</h1>
<p>Analyzing and validating measurement methods and tools is the base for ensuring the quality of manufacturing products. For most commercial products it is not simply about satisfying consumer expectations but has regulatory and legal implications. Using measurement tools in industrial setups for high volume production goes naturally beyond buying and installing an equipment. It requires clear operating procedures, trained operators and tested devices for the specific range applications and products.</p>
<p>There are many different normalizing bodies in the metrology domain with different approaches and terminology. The cases in this section follow a simplified step by step approach aiming at giving an overview of how data treatment can be done with R.</p>
<p>The first case treats the calibration of a recently acquired measurement device by comparing it to a reference device. It provides statistical analysis of the bias of the method compared with the reference for the full measurement range. The following case deals with the estimation of the method precision, namely the measurement repeatability and reproducibility under regular utilization conditions. It provides examples on acceptance criteria typical in industrial context. The final case study presents calculation of the method uncertainty, a more comprehensive indicator taking into account the calculations done in the previous cases.</p>
<div id="calibration" class="section level2">
<h2>Calibration</h2>
<div class="marginnote">
<p><b class="highlight">Case study: juice production plant</b></p>
<p>The Quality Assurance Head has acquired a fast dry matter content measurement device from the supplier DRX. The rational for the acquisition has been the important reduction of the control time. Before it enters operation its performance is being assessed and validated.</p>
<p><img src="img/juice_bottling_bw.jpg" width="100%" /></p>
</div>
<p>A first step after a measurement equipment acquisition is the assessment of the response over the entire measurement range. In particular it is important to verify its linearity and variability and determine the average bias throughout the measurement range.</p>
<p>In a <b class="highlight">juice production plant</b> the dry matter content for the top seller is around 13% dry matter content. Typical specifications are the Premium fresh apple juice with 12.4 % and the Austrian beetroot juice with 13.2%. Some other specialties may have a higher content up such as the Organic carrot that has 16.3%. After consulting with the Manufacturing Team Leader, the Quality Assurance Head selects checking the equipment in the range of 10 to 20% dry matter content. For the calibration assessment samples are produced at target values set at round numbers (10%, 15% and so on). This data is captured in the <code>juice_drymatter</code> dataset of which we’re checki</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="MSA.html#cb36-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="MSA.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="MSA.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb36-4"><a href="MSA.html#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&quot;c&quot;</span>,</span>
<span id="cb36-5"><a href="MSA.html#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;juice dry matter data&quot;</span></span>
<span id="cb36-6"><a href="MSA.html#cb36-6" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<table>
<caption><span id="tab:code-juicesummary">Table 3: </span>juice dry matter data</caption>
<thead>
<tr class="header">
<th align="center">product</th>
<th align="center">drymatter_TGT</th>
<th align="center">speed</th>
<th align="center">particle_size</th>
<th align="center">part</th>
<th align="center">drymatter_DRX</th>
<th align="center">drymatter_REF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">apple</td>
<td align="center">10</td>
<td align="center">20</td>
<td align="center">250</td>
<td align="center">1</td>
<td align="center">9.80</td>
<td align="center">10.05</td>
</tr>
<tr class="even">
<td align="center">apple</td>
<td align="center">10</td>
<td align="center">20</td>
<td align="center">250</td>
<td align="center">2</td>
<td align="center">9.82</td>
<td align="center">10.05</td>
</tr>
<tr class="odd">
<td align="center">apple</td>
<td align="center">10</td>
<td align="center">20</td>
<td align="center">250</td>
<td align="center">3</td>
<td align="center">9.82</td>
<td align="center">10.05</td>
</tr>
<tr class="even">
<td align="center">beetroot</td>
<td align="center">10</td>
<td align="center">20</td>
<td align="center">250</td>
<td align="center">1</td>
<td align="center">9.79</td>
<td align="center">10.03</td>
</tr>
<tr class="odd">
<td align="center">beetroot</td>
<td align="center">10</td>
<td align="center">20</td>
<td align="center">250</td>
<td align="center">2</td>
<td align="center">9.75</td>
<td align="center">10.03</td>
</tr>
</tbody>
</table>
<p>We see in this raw dataset that it contains the same samples dry matter content measured twice. First with the with the new equipment (DRX) and then with the reference equipment (Ref). The reference equipment is considered as such because it has been validated and accepted by the head quarters quality department. The difference between the two devices for each measurement is calculated below and allocated to a new variable with the name bias.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="MSA.html#cb37-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter <span class="ot">&lt;-</span> juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="MSA.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bias =</span> drymatter_DRX <span class="sc">-</span> drymatter_REF, <span class="at">part =</span> <span class="fu">as_factor</span>(part))</span></code></pre></div>
<p>A first look at the bias with the <code>skim()</code> function from <code>{skimr}</code> gives already an indication that the bias is not constant along the measurement range.</p>
<div class="marginnote">
<p>See <a href="toolbox.html#skimr">{skimr}</a> for more details on this R package, an alternative to base::summary()</p>
</div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="MSA.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="MSA.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(juice_drymatter<span class="sc">$</span>bias) <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="MSA.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yank</span>(<span class="st">&quot;numeric&quot;</span>)</span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">data</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">-0.3</td>
<td align="right">0.14</td>
<td align="right">-0.63</td>
<td align="right">-0.4</td>
<td align="right">-0.29</td>
<td align="right">-0.19</td>
<td align="right">-0.07</td>
<td align="left">▂▅▆▇▇</td>
</tr>
</tbody>
</table>
<p>Such results are not encouraging because a non regular bias along the range may require specific correction for different product which may be not practical and prone to error. Often this requires to dig into detail to understand the causes of the bias and determine if they are related with the physical phenomena and if there are clear controllable causes. Ultimately this could result is narrowing the measurement range and validating a specific device and method for a specific product specification target. For the Quality Assurance Manager it is too early to draw conclusions and he establishes a more detailed plot with <code>{ggplot2}</code> to better visualize the data.</p>
<div id="bias_plot" class="section level3">
<h3>Bias plot</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="MSA.html#cb40-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="MSA.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> drymatter_REF, <span class="at">y =</span> bias)) <span class="sc">+</span></span>
<span id="cb40-3"><a href="MSA.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb40-4"><a href="MSA.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> T, ) <span class="sc">+</span></span>
<span id="cb40-5"><a href="MSA.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb40-6"><a href="MSA.html#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">9</span>,<span class="dv">21</span>),</span>
<span id="cb40-7"><a href="MSA.html#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">75</span>,<span class="dv">0</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb40-8"><a href="MSA.html#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_industRial</span>() <span class="sc">+</span></span>
<span id="cb40-9"><a href="MSA.html#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dry matter method validation&quot;</span>,</span>
<span id="cb40-10"><a href="MSA.html#cb40-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Gage Linearity&quot;</span>,</span>
<span id="cb40-11"><a href="MSA.html#cb40-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Dataset: juice_drymatter233A, Operator: S.Jonathan)&quot;</span>)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-juicebiasplot-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This type of plot is usually called <em>bias plot</em> and provides a view of how the difference between the measurements obtained with the new device and the reference device compare allong the measuremen range. In the plot generated an additional regression line has been introduced with <code>geom_smooth</code> from <code>{ggplot2}</code>. There are several ways to assess the linearity. In this case we’re going to remain at a visual check only leaving to the Design of Experiments case study a more thourough verification.</p>
<p>The linear model appears as well adapted in this case. The first check is the observation that regression line passes close to the averages of each level of the dry matter factor. Nevertheless the slope is rather steep showing a clear increase of the bias (in the negative direction) with the increase in dry matter content.</p>
</div>
<div id="bias_report" class="section level3">
<h3>Bias report</h3>
<p>Using well known <code>{dplyr}</code> function the plot is complemented with statistics of the bias for each level of dry matter target: mean, median, standard deviation. A good practice that took some time to adopt but now is well anchored is to always present the sample size which speaks for the relevance of the statistical indicators.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="MSA.html#cb41-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter_bias <span class="ot">&lt;-</span> juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="MSA.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drymatter_TGT) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="MSA.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">bias_mean =</span> <span class="fu">mean</span>(bias, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb41-4"><a href="MSA.html#cb41-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">bias_median =</span> <span class="fu">median</span>(bias, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb41-5"><a href="MSA.html#cb41-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">bias_sd =</span> <span class="fu">sd</span>(bias, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb41-6"><a href="MSA.html#cb41-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">bias_n =</span> <span class="fu">n</span>())</span>
<span id="cb41-7"><a href="MSA.html#cb41-7" aria-hidden="true" tabindex="-1"></a>juice_drymatter_bias <span class="sc">%&gt;%</span></span>
<span id="cb41-8"><a href="MSA.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">drymatter_TGT</th>
<th align="center">bias_mean</th>
<th align="center">bias_median</th>
<th align="center">bias_sd</th>
<th align="center">bias_n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">10</td>
<td align="center">-0.17</td>
<td align="center">-0.15</td>
<td align="center">0.07</td>
<td align="center">36</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">-0.29</td>
<td align="center">-0.31</td>
<td align="center">0.10</td>
<td align="center">36</td>
</tr>
<tr class="odd">
<td align="center">20</td>
<td align="center">-0.44</td>
<td align="center">-0.44</td>
<td align="center">0.10</td>
<td align="center">36</td>
</tr>
</tbody>
</table>
<p>Mean and median bias are very close which indicates that the data is equally distributed around the mean The standard deviation is also very similar from level to level indicating that the measurement variability is not depending on the range of measurement. A decision now needs to be taken on which systematic offset to apply depending on the operational context. As mentioned most commercial products on the production line where the device is used have a target specification around 13% therefore the Quality Assurance Head decides together with Manufacturing Team Leader to put in the operating procedure of the device a unique offset of 0.3 g. This value is assigned to a new variable called <code>juice_cal_u</code> that will be needed later to calculate the measurement uncertainty.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="MSA.html#cb42-1" aria-hidden="true" tabindex="-1"></a>u_cal <span class="ot">&lt;-</span> <span class="fu">as_vector</span>(juice_drymatter_bias[<span class="dv">2</span>,<span class="dv">4</span>])</span>
<span id="cb42-2"><a href="MSA.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(u_cal) <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># we&#39;re removing the original name to avoid confusion later.</span></span></code></pre></div>
</div>
</div>
<div id="precision" class="section level2">
<h2>Precision</h2>
<div class="marginnote">
<p><b class="highlight">Case study: tablet compaction process</b></p>
<p>Modern pharmaceutical tablet presses reach output volumes of up to 1,700,000 tablets per hour. These huge volumes require frequent in-process quality control for the tablet weight, thickness and hardness.</p>
<p><img src="img/tablet_micrometer.png" width="100%" /></p>
</div>
<p>Pharmaceutical production setups combine extreme high volumes with stringent quality demands. In this context many manufacturing plants have inline automatic measurement devices providing automatic data collection to a central database but it is not uncommon to see hand held devices and manual log of measurements in spreadsheets. In an age of machine learning and sophisticated predictive tools this may seem awkward but it is common to see coexisting old and new approaches on the shop floor. A recurring check of measurement devices is the famous gage r&amp;R. r&amp;R stands for reproducibility and Reproductibility which combined give the instrument precision, according to the ISO 5725. In any case automatic or manual the way to assess the measuremen device should follow the same approach.</p>
<p>In our case we’re looking into a pharmaceutical company where a <b class="highlight">tablet compaction process</b> the quality measurement system requires the Production Operator to sample tablets on a regular basis and log the thickness in a spreadsheet on the line. Measurements are done with a micrometer build and acquired specifically for this purpose that has a fixture developed to fit the shape of the tablet.</p>
<p>Besides thickness, the quality measurement system requires the operator to collect quite an large variety of parameters including room conditions too. Elaborating on this a Quality Engineer has prepared a specific file for the gage r&amp;R that also included the replicate number. As it is common practice he asked the measurements to be done by several operators. This data has been loaded into R and is available in the dataset <code>tablet_thickness</code> and an extract is presented here in raw:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="MSA.html#cb43-1" aria-hidden="true" tabindex="-1"></a>tablet_thickness <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="MSA.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="MSA.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb43-4"><a href="MSA.html#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">align =</span> <span class="st">&quot;c&quot;</span>,</span>
<span id="cb43-5"><a href="MSA.html#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;tablet thickness gage r&amp;R data&quot;</span></span>
<span id="cb43-6"><a href="MSA.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<caption><span id="tab:tbl-tabletthickness">Table 4: </span>tablet thickness gage r&amp;R data</caption>
<colgroup>
<col width="7%" />
<col width="3%" />
<col width="5%" />
<col width="7%" />
<col width="4%" />
<col width="12%" />
<col width="6%" />
<col width="12%" />
<col width="11%" />
<col width="14%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Position</th>
<th align="center">Size</th>
<th align="center">Tablet</th>
<th align="center">Replicate</th>
<th align="center">Day</th>
<th align="center">Date [DD.MM.YYYY]</th>
<th align="center">Operator</th>
<th align="center">Thickness [micron]</th>
<th align="center">Temperature [°C]</th>
<th align="center">Relative Humidity [%]</th>
<th align="center">Luminescence [lux]</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Position 1</td>
<td align="center">L</td>
<td align="center">L001</td>
<td align="center">1</td>
<td align="center">Day 1</td>
<td align="center">18/11/2020</td>
<td align="center">Paulo</td>
<td align="center">1802.5</td>
<td align="center">22.3</td>
<td align="center">32.7</td>
<td align="center">568.6</td>
</tr>
<tr class="even">
<td align="center">Position 1</td>
<td align="center">L</td>
<td align="center">L001</td>
<td align="center">2</td>
<td align="center">Day 1</td>
<td align="center">18/11/2020</td>
<td align="center">Paulo</td>
<td align="center">1802.8</td>
<td align="center">22.3</td>
<td align="center">32.8</td>
<td align="center">580.4</td>
</tr>
<tr class="odd">
<td align="center">Position 1</td>
<td align="center">L</td>
<td align="center">L001</td>
<td align="center">3</td>
<td align="center">Day 1</td>
<td align="center">18/11/2020</td>
<td align="center">Paulo</td>
<td align="center">1804.0</td>
<td align="center">22.3</td>
<td align="center">32.8</td>
<td align="center">580.5</td>
</tr>
</tbody>
</table>
<p>It is an excellent practice to look at raw data because it gives an immediate perception of general aspects such as the number of variables, their levels and their datatypes. Although this is irreplaceable it is possible to go further and <code>skim()</code> provides an excellent complement and summary. Below we see that the test requested by the Quality Engineer has required 675 measurements on 11 different variables by 3 different operators. We can see room conditions are stable, rather normally distributed and having small standard deviations and we can even see that thickness appears with 3 groups which seems related with the 3 sizes noted in the Size column.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="MSA.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(tablet_thickness) </span></code></pre></div>
<p>The initial idea of the Quality Engineer was to establish a separate gage r&amp;R by tablet size. There is sometimes debate if in the study several different specification should be combined or not. In the last quality weekly meeting this was reason for lively discussions with various logical arguments from the Production Leader and the Engineering Manager. They ended up accepting the proposal of a separate gage per size on the logic that it is important to compare the measurement method variability not only with the process variability but also with the specification itself.</p>
<p>Data in excel files to have most of the time human readable formats and the files being open they usually end up with long variable names. Unlike the classical <code>read.csv()</code> function from the base R the <code>read_csv()</code> function from <code>{readr}</code> is not converting character variables to factors. This is a good behavior in our view because it allows for better control and awareness of what is happening. In this case the Quality Engineer is acquainted to the <code>{tidyverse}</code> and is now making the conversion specifically on the desired variables size, tablet and operator. He also makes the filtering for the size L for which he will do the first r&amp;R study.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="MSA.html#cb45-1" aria-hidden="true" tabindex="-1"></a>tablet_thickness <span class="ot">&lt;-</span> tablet_thickness <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="MSA.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="MSA.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(size, tablet, operator), as_factor))</span>
<span id="cb45-4"><a href="MSA.html#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="MSA.html#cb45-5" aria-hidden="true" tabindex="-1"></a>tablet_L <span class="ot">&lt;-</span> tablet_thickness <span class="sc">%&gt;%</span></span>
<span id="cb45-6"><a href="MSA.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(size <span class="sc">==</span> <span class="st">&quot;L&quot;</span>)</span></code></pre></div>
<p>Now that the dataset is clean and ready he moves forward with the <code>ss.rr()</code> function from the <code>{SixSigma}</code> package.</p>
<div id="gageRnR" class="section level3">
<h3>Gage r&amp;R</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="MSA.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SixSigma)</span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="MSA.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensions for chunk output when included: fig.dim=c(8, 10)</span></span>
<span id="cb47-2"><a href="MSA.html#cb47-2" aria-hidden="true" tabindex="-1"></a>tablet_L_rr <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb47-3"><a href="MSA.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> tablet_L, </span>
<span id="cb47-4"><a href="MSA.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> thickness_micron, </span>
<span id="cb47-5"><a href="MSA.html#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> tablet, </span>
<span id="cb47-6"><a href="MSA.html#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb47-7"><a href="MSA.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="dv">1</span>,</span>
<span id="cb47-8"><a href="MSA.html#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>,</span>
<span id="cb47-9"><a href="MSA.html#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Micrometer FTR600</span><span class="sc">\n</span><span class="st">r&amp;R for tablet thickness&quot;</span>,</span>
<span id="cb47-10"><a href="MSA.html#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Tablet L&quot;</span>,</span>
<span id="cb47-11"><a href="MSA.html#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">1775</span>,</span>
<span id="cb47-12"><a href="MSA.html#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">1825</span></span>
<span id="cb47-13"><a href="MSA.html#cb47-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The <code>ss.rr</code> function takes the filtered <code>tablet_L</code> dataset and <code>var</code>, <code>part</code> and the arguments <code>appr</code> to precise what is the measurement variable, the part and the operator in this order. Then to be noted that the <code>alphaLim</code> argument is set to 1 in this first assessment. This is to keep all the model terms including non significant one. In future analysis this can be set to 0.05 the usual significance threshold and those non significant terms are omitted. Another detail important to ensure is to select the repeatability as the <code>errorTerm</code> otherwise we get different results than those obtained with base anova and other software aligned with the <span class="citation"><a href="#ref-AIAG2010" role="doc-biblioref">Automotive Industry Action Group</a> (<a href="#ref-AIAG2010" role="doc-biblioref">2010</a>)</span> guidelines such as Minitab. Finally the function also allows to input the limits he also provides in the arguments the current upper and lower limit of the specification, in this case of 1’800 <span class="math inline">\(\mu m\)</span> +/- 25 <span class="math inline">\(\mu m\)</span> for tablet L.</p>
<p>The output of this function is a list with several elements inside and an automatically generated report.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="MSA.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(tablet_L_rr)</span></code></pre></div>
<pre><code>[1] &quot;anovaTable&quot; &quot;anovaRed&quot;   &quot;varComp&quot;    &quot;studyVar&quot;   &quot;ncat&quot;      </code></pre>
<p>We’re now looking more in detail in some of them.</p>
</div>
<div id="gage_acceptance" class="section level3">
<h3>Gage acceptance</h3>
<p>Measurement system acceptance can be done based on varied criteria and is often done in progressive stages. In Research and Development contexts it is common that the measurement method is developed simultaneously with the end product. There are stages where the teams are conceiving the full industrial setup and there may be an overlap between product sub-assembly, assembly machine and measurement device. These different components of the production or assembly line may not reach maturity all at the same time. In such cases the Quality Assurance may give an approval for the measurement device based on tests done on products that cannot yet be commercialized. This means that the final conditions of usage are not fully tested. In other cases the measurement method is complex but time presses and the teams test the quality of the parts by other means such as the failure rates of the assemblies where the parts go. For all these reasons it is important to clarify at all times the assumptions used in the assessment of the measurement method.</p>
<div id="variance-components" class="section level4">
<h4>Variance components</h4>
<p>A common way to quickly judge if an equipment variability is high is to look at its variance. In our case the Quality Engineer can look at the variance components of the gage r&amp;R study by calling them from the <code>ss.rr</code> list.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="MSA.html#cb50-1" aria-hidden="true" tabindex="-1"></a>tablet_L_rr<span class="sc">$</span>varComp <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="MSA.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">VarComp</th>
<th align="right">%Contrib</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Total Gage R&amp;R</td>
<td align="right">1.6</td>
<td align="right">14.8</td>
</tr>
<tr class="even">
<td align="left">Repeatability</td>
<td align="right">1.6</td>
<td align="right">14.2</td>
</tr>
<tr class="odd">
<td align="left">Reproducibility</td>
<td align="right">0.1</td>
<td align="right">0.6</td>
</tr>
<tr class="even">
<td align="left">operator</td>
<td align="right">0.1</td>
<td align="right">0.6</td>
</tr>
<tr class="odd">
<td align="left">tablet:operator</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Part-To-Part</td>
<td align="right">9.5</td>
<td align="right">85.2</td>
</tr>
<tr class="odd">
<td align="left">Total Variation</td>
<td align="right">11.1</td>
<td align="right">100.0</td>
</tr>
</tbody>
</table>
<p>Looking at the column %Contrib he sees that the total gage R&amp;R is too high when comparing with the established guidelines for gage acceptance:</p>
<ul>
<li>Less than 1%: the measurement system is acceptable</li>
<li>Between 1% and 9%: the measurement system is acceptable depending on the application,<br />
the cost of the measurement device, cost of repair, or other factors</li>
<li>Greater than 9%: the measurement system is not acceptable and should be improved.</li>
</ul>
<p>Another direct information from this assessment is that this variability comes from the repeatability mostly and not from the operator or from the interaction. This is very useful as a clue to start identifying where the variability comes from and how to try to improve it.</p>
<p>Although quick and providing a first impression, variance is not a very intuitive statistic as is not expressed in the measurement units. A much more common and speaking approach is to look into the standard deviation and compare it with the process variation but also with the specification itself.</p>
</div>
<div id="standard-deviation-components" class="section level4">
<h4>Standard deviation components</h4>
<p>The standard deviation values from the study can be pulled from the list with the same approach as before.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="MSA.html#cb51-1" aria-hidden="true" tabindex="-1"></a>tablet_L_rr<span class="sc">$</span>studyVar <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="MSA.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">StdDev</th>
<th align="right">StudyVar</th>
<th align="right">%StudyVar</th>
<th align="right">%Tolerance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Total Gage R&amp;R</td>
<td align="right">1.3</td>
<td align="right">7.7</td>
<td align="right">38.5</td>
<td align="right">15.4</td>
</tr>
<tr class="even">
<td align="left">Repeatability</td>
<td align="right">1.3</td>
<td align="right">7.5</td>
<td align="right">37.6</td>
<td align="right">15.1</td>
</tr>
<tr class="odd">
<td align="left">Reproducibility</td>
<td align="right">0.3</td>
<td align="right">1.6</td>
<td align="right">7.9</td>
<td align="right">3.1</td>
</tr>
<tr class="even">
<td align="left">operator</td>
<td align="right">0.3</td>
<td align="right">1.6</td>
<td align="right">7.9</td>
<td align="right">3.1</td>
</tr>
<tr class="odd">
<td align="left">tablet:operator</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Part-To-Part</td>
<td align="right">3.1</td>
<td align="right">18.4</td>
<td align="right">92.3</td>
<td align="right">36.9</td>
</tr>
<tr class="odd">
<td align="left">Total Variation</td>
<td align="right">3.3</td>
<td align="right">20.0</td>
<td align="right">100.0</td>
<td align="right">40.0</td>
</tr>
</tbody>
</table>
<p>The study variation table is has several columns. The StdDev column contains the square root of each individual variance. The StudyVar column has each StdDev multiplied by 6 which corresponds to the max variability for each component. Then each StudyVar is divided by the Total Variation and expressed in percentage in the %StudyVar column. The last column %Tolerance contains the division of the StudyVar by the specification interval (+/- 25 <span class="math inline">\(\mu m\)</span> in this case) expressed in percentage.</p>
<p>The Quality Engineer is now is a position to progress is assessment. According to the guidelines followed in the company the measurement method variation needs to be less than 10% of the process variation to be considered directly accepted. This is expressed here in the column %StudyVar and is 38.46% which is much above this limit. The guidelines state:</p>
<ul>
<li>Less than 10%: the measurement system is acceptable</li>
<li>Between 10% and 30%: the measurement system is acceptable depending on the application,<br />
the cost of the measurement device, cost of repair, or other factors</li>
<li>Greater that 30%: the measurement system is not acceptable and should be improved.</li>
</ul>
<p>As he already knew, the variability is mostly coming from the repeatability. With this approach he can also compare with the product specification tolerance which is 15.37%. The part to part variation corresponds to the bulk of the variability and this is what is expected.</p>
<p>Although the Quality Assurance department is not fully validating a measurement method with these figures there seems to be potential to improve the situation. At this moment we can consider that the micrometer allows to sort good parts from bad because the variability is lower than 30% of specification tolerance but it cannot be used to drive production as the variation is higher than 30% of the production process variation.</p>
</div>
</div>
<div id="gage-plots" class="section level3">
<h3>Gage plots</h3>
<p>Besides the Variance the Standard Deviation components the <code>ss.rr</code> function generates a full report. We’re going to look into at each of the plots by generating them with the custom function <code>ss.rr.plots</code>. The details of the function itself are presented afterwards.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="MSA.html#cb52-1" aria-hidden="true" tabindex="-1"></a>tablet_L_rr_plots <span class="ot">&lt;-</span> <span class="fu">ss.rr.plots</span>(</span>
<span id="cb52-2"><a href="MSA.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> tablet_L, </span>
<span id="cb52-3"><a href="MSA.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> thickness_micron, </span>
<span id="cb52-4"><a href="MSA.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> tablet, </span>
<span id="cb52-5"><a href="MSA.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb52-6"><a href="MSA.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="dv">1</span>,</span>
<span id="cb52-7"><a href="MSA.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>,</span>
<span id="cb52-8"><a href="MSA.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Micrometer FTR600</span><span class="sc">\n</span><span class="st">r&amp;R for tablet thickness&quot;</span>,</span>
<span id="cb52-9"><a href="MSA.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Tablet L&quot;</span>,</span>
<span id="cb52-10"><a href="MSA.html#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">1775</span>,</span>
<span id="cb52-11"><a href="MSA.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">1825</span></span>
<span id="cb52-12"><a href="MSA.html#cb52-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="MSA.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tablet_L_rr_plots<span class="sc">$</span>plot1)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-tabletPlot1-1.png" width="100%" /></p>
<p>This first bar plot presents in a graphical way the gage results in percentage and we can quickly grasp if we’re on target by looking at the pink bars and comparing them with the dashed bars. We can see that the G.R&amp;R is above 30% and thus is not acceptable from a Study Variation criteria. In green we see that compared with the specification we’re above 10% but below 30% so acceptable but requiring improvement. We’re now looking into the measurements themselves:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="MSA.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tablet_L_rr_plots<span class="sc">$</span>plot6)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-tabletPlot5-1.png" width="100%" /></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="MSA.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tablet_L_rr_plots<span class="sc">$</span>plot5)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-tabletPlot5-2.png" width="100%" /></p>
<p>The previous two plots show the measurements for each operator. The first is the Ranges plot showing the differences between the min and max measurement for each part and the second plot is the means plot showing the mean thickness for each part by operator. These help showing that there is a consistency between operators and help as a diagnosis tool to identify if there would be strange patterns appearing where one of the operators would be for instance systematically measuring very high values. The next two plots show average values by part with all operators combined:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="MSA.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tablet_L_rr_plots<span class="sc">$</span>plot2)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-tabletPlot2-1.png" width="100%" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="MSA.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tablet_L_rr_plots<span class="sc">$</span>plot3)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-tabletPlot2-2.png" width="100%" /></p>
<p>We quickly see the measurements tend to be simetrically distributed around their means and that the means between the different operators are very similar. This confirms the low reproducibility what has been seen in the Variance Components.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="MSA.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(tablet_L_rr_plots<span class="sc">$</span>plot4)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/fig-tabletPlot4-1.png" width="100%" /></p>
<p>This final plot is the so called interaction plot and if there were diverting and strongly crossed lines would indicate that different operators measure the parts in different ways. Again here this confirms the low value obtained for the interaction in the Variance Components table.</p>
<div class="marginnote">
<p>Tablet thickness measurements obtained with a gage r&amp;R study done on a pharmaceutical tablet compaction process. Red dashed lines corresponds to the thickness specification limits.</p>
<p><img src="4_msa_files/figure-html/fig-tablethistogram-1.png" width="100%" /></p>
</div>
<p>When the gage report was shared with the Production Leader and the Engineering Manager they raised concerns regarding which is how big is our process variability and how much is the process centered. These are valid points as we often go back and forth between measurement validation, product development and process control. Measurement validation makes us look into details on the measured values and question their validity. Taking conscience that the production specification is not adapted, too large or too narrow. Often we realise that production is systematically slightly off centered. Depending on the diagnostic a new gage r&amp;R plan and sampling may need to be prepared and the process or the specification adjusted. Such topics will be further discussed in the Design of Experiments and in the Statistical Process Control subjects.</p>
</div>
<div id="negative-variance" class="section level3">
<h3>Negative variance</h3>
<p>We’ve started the gage assessment by setting the <code>errorTerm</code> to 1. This made that factors that were non significant remained visible, in our case this happened with the tablet:operator interaction. Although the <code>ss.rr</code> function is always showing zero for non significant factors it may happen that in reality the calculated value is negative.</p>
<p>We refer to page 557 <span class="citation"><a href="#ref-Montgomery2012" role="doc-biblioref">Montgomery</a> (<a href="#ref-Montgomery2012" role="doc-biblioref">2012</a>)</span> to get guidance on how to adresses this case:</p>
<p><em>note that the P-value for the interaction term […] is very large, take this as evidence that it really is zero and that there is no interaction effect, and then fit a reduced model of the form that does not include the interaction term. This is a relatively easy approach and one that often works nearly as well as more sophisticated methods.</em></p>
<p>This approach is the one implemented in <code>{SixSigma}</code>. When we leave the argument <code>alphaLim</code> empty the non significant terms are be suppressed from the model, the Anova is recalculated and the remaining tables updated accordingly. We can control this behavior by playing with different values. Usually we consider a p value of 0.05 but we recommend to start with higher values such as 0.1 or 0.2 to avoid suppressing too quickly the factor which would result in a transfer of their variability into the repeatability. Below we run again the <code>ss.rr</code> function with a limit at 0.05 and get the entire data and plot output in one single step. In our case adjusting the p value has had a very limited impact in the total gage r&amp;R which has changed only from 38.46% to 38.38%.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="MSA.html#cb59-1" aria-hidden="true" tabindex="-1"></a>tablet_L_rr2 <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb59-2"><a href="MSA.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> tablet_L, </span>
<span id="cb59-3"><a href="MSA.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> thickness_micron, </span>
<span id="cb59-4"><a href="MSA.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> tablet, </span>
<span id="cb59-5"><a href="MSA.html#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb59-6"><a href="MSA.html#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="fl">0.05</span>,</span>
<span id="cb59-7"><a href="MSA.html#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>,</span>
<span id="cb59-8"><a href="MSA.html#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Micrometer FTR600</span><span class="sc">\n</span><span class="st">r&amp;R for tablet thickness&quot;</span>,</span>
<span id="cb59-9"><a href="MSA.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Tablet L&quot;</span>,</span>
<span id="cb59-10"><a href="MSA.html#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">1775</span>,</span>
<span id="cb59-11"><a href="MSA.html#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">1825</span></span>
<span id="cb59-12"><a href="MSA.html#cb59-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

                 Df Sum Sq Mean Sq F value Pr(&gt;F)
tablet            4   1707     427  271.46 &lt;2e-16
operator          2     13       7    4.18  0.017
tablet:operator   8     11       1    0.89  0.524
Repeatability   210    330       2               
Total           224   2062                       

alpha for removing interaction: 0.05 


Reduced model (without interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
tablet          4   1707     427  272.53 &lt;2e-16
operator        2     13       7    4.19  0.016
Repeatability 218    341       2               
Total         224   2062                       

Gage R&amp;R

                    VarComp %Contrib
Total Gage R&amp;R     1.632605    14.73
  Repeatability    1.565919    14.13
  Reproducibility  0.066685     0.60
    operator       0.066685     0.60
Part-To-Part       9.448857    85.27
Total Variation   11.081462   100.00

                    VarComp  StdDev StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     1.632605 1.27773   7.6664     38.38      15.33
  Repeatability    1.565919 1.25137   7.5082     37.59      15.02
  Reproducibility  0.066685 0.25823   1.5494      7.76       3.10
    operator       0.066685 0.25823   1.5494      7.76       3.10
Part-To-Part       9.448857 3.07390  18.4434     92.34      36.89
Total Variation   11.081462 3.32888  19.9733    100.00      39.95

Number of Distinct Categories = 3 </code></pre>
<p><img src="4_msa_files/figure-html/fig-tabletNegativeVar-1.png" width="100%" /></p>
<p>Further developments on the gage r&amp;R in the excellent book from Springer by the <code>{SixSigma}</code> package author <span class="citation"><a href="#ref-Cano2012" role="doc-biblioref">Emilio L. Cano</a> (<a href="#ref-Cano2012" role="doc-biblioref">2012</a>)</span>.</p>
</div>
<div id="custom-functions" class="section level3">
<h3>Custom functions</h3>
<p>The original report generated by the <code>ss.rr</code>function has the inconvenient of being generated as a single plot. Another inconvenient is that there is no option in the function to suppress it in case we just want to look at the data output. To present the individual plots presented in this unit the original function code has had to be modified. This possibility to reuse and modify the code from other authors is one of the great benefits of R. This is possible because are is distributed under a license from the Free Software Foundation. Licenses are long are difficult to read but by simply typing <code>RShowDoc("GPL-3")</code> we can already read in the first few lines <em>you can change the software or use pieces of it in new free programs</em>. The <code>{SixSigma}</code> package itself is also under the same license:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="MSA.html#cb61-1" aria-hidden="true" tabindex="-1"></a>SixSigmaDescription <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">packageDescription</span>(<span class="st">&quot;SixSigma&quot;</span>) </span>
<span id="cb61-2"><a href="MSA.html#cb61-2" aria-hidden="true" tabindex="-1"></a>SixSigmaDescription<span class="sc">$</span>License</span></code></pre></div>
<pre><code>[1] &quot;GPL (&gt;= 2)&quot;</code></pre>
<p>This being all cleared out the <code>ss.rr</code> function code can the be obtained in RStudio by selecting the package environment in the environment pane and looking for the function. A more direct approach is by simply typing <code>ss.rr</code> on the console. The full code is then revealed and can be copied and modified. For the <code>{industRial}</code> package we’ve copied the code in a new function which we called <code>ss.rr.plots</code> that generates as output a list of plots. Each plot can now be plotted individually.</p>
</div>
</div>
<div id="uncertainty" class="section level2">
<h2>Uncertainty</h2>
<p>In the Pharmaceutical company described in this case study, the final formal Measurement System Analysis reports are issued with a statement on uncertainty. This is a way to combine this various intermediate assessments described before and to communicate the result in a format that can be interpreted by the persons who read measurement results such as Product Development scientists and the R&amp;D management. Different companies adopt more or less sophisticated norms which provide a detailed way of calculating the combined uncertainty that comes from the different assessments performed. In this case study we’re presenting a simple summation in quadrature equivalento to the one described by <span class="citation"><a href="#ref-Bell2001" role="doc-biblioref">Bell</a> (<a href="#ref-Bell2001" role="doc-biblioref">2001</a>)</span> page 14:</p>
<p><span class="math display">\[
u=\sqrt{u_{man.}^2 + u_{cal.}^2 + u_{repeat.}^2+ u_{reprod.}^2}
\]</span></p>
<p>This formula consists in taking the square root of the sum of the squares of the standard deviations obtained in the different tests.</p>
<p>The first term is coming from the micrometer manufacturer which mentions in the equipment guide an accuracy of 0.001 mm which corresponds to 1 <span class="math inline">\(\mu\)</span>. We assign this in R to the u_man variable:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="MSA.html#cb63-1" aria-hidden="true" tabindex="-1"></a>u_man <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb63-2"><a href="MSA.html#cb63-2" aria-hidden="true" tabindex="-1"></a>u_man</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>The calibration uncertainty has been established before in the calibration study :</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="MSA.html#cb65-1" aria-hidden="true" tabindex="-1"></a>u_cal</span></code></pre></div>
<pre><code>[1] 0.10244</code></pre>
<p>The repeatability and reproducibility uncertainties correspond to the standard deviations calculated in the r&amp;R study. In our case we can even obtain them directly from the Variance Components table generated by the <code>ss.rr</code> function of the {SixSigma} package that has bee discussed in details the Gage acceptance unit. We are going to name <span class="math inline">\(u_{repeat}^2\)</span> as u_repeat <span class="math inline">\(u_{reprod}^2\)</span> as u_reprod getting:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="MSA.html#cb67-1" aria-hidden="true" tabindex="-1"></a>u_repeat <span class="ot">&lt;-</span> tablet_L_rr<span class="sc">$</span>studyVar[<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb67-2"><a href="MSA.html#cb67-2" aria-hidden="true" tabindex="-1"></a>u_repeat</span></code></pre></div>
<pre><code>[1] 1.2538</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="MSA.html#cb69-1" aria-hidden="true" tabindex="-1"></a>u_reprod <span class="ot">&lt;-</span> tablet_L_rr<span class="sc">$</span>studyVar[<span class="dv">3</span>,<span class="dv">1</span>]</span>
<span id="cb69-2"><a href="MSA.html#cb69-2" aria-hidden="true" tabindex="-1"></a>u_reprod</span></code></pre></div>
<pre><code>[1] 0.26241</code></pre>
<p>Now putting it all together in the uncertainty formula we have:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="MSA.html#cb71-1" aria-hidden="true" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(u_man<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> u_cal<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> u_repeat<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> u_reprod<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb71-2"><a href="MSA.html#cb71-2" aria-hidden="true" tabindex="-1"></a>u</span></code></pre></div>
<pre><code>[1] 1.6283</code></pre>
<p>Finally what is usually reported is the expanded uncertainty corresponding to 2 standard deviations. To be recalled that <span class="math inline">\(\pm\)</span> 2 std corresponds to 95% of the values when a repetitive measurement is made. In this case we have <span class="math inline">\(U = 2*u\)</span>:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="MSA.html#cb73-1" aria-hidden="true" tabindex="-1"></a>U <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> u</span>
<span id="cb73-2"><a href="MSA.html#cb73-2" aria-hidden="true" tabindex="-1"></a>U</span></code></pre></div>
<pre><code>[1] 3.2567</code></pre>
<p>For a specific measurement of say 1’800 <span class="math inline">\(\mu m\)</span> we then say: the tablet thickness is 1’800 <span class="math inline">\(\mu m\)</span> <span class="math inline">\(\pm\)</span> 3.3 <span class="math inline">\(\mu m\)</span>, at the 95 percent confidence level. Written in short is:</p>
<p><strong>1’800 <span class="math inline">\(\mu m\)</span> <span class="math inline">\(\pm\)</span> 3.3 <span class="math inline">\(\mu m\)</span>, at a level of confidence of 95%</strong></p>
<p>Knowing that the specification is [1’775; 1’825] <span class="math inline">\(\mu\)</span>m we have a specification range of 50. The expanded uncertainty corresponds to 13.03 %. This is another way of looking into the ratio between method variation and specification. The <code>{SixSigma}</code> package gave a similar result of 15.37%. To be noted that the calculation in by the package corresponds to 3 standard deviations and does not comprise the supplier calibration.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-AIAG2010" class="csl-entry">
Automotive Industry Action Group, AIAG -, ed. 2010. <a href="https://www.aiag.org/store/publications/details?ProductCode=MSA-4">https://www.aiag.org/store/publications/details?ProductCode=MSA-4</a>.
</div>
<div id="ref-Bell2001" class="csl-entry">
Bell, Stéphanie. 2001. <em>The Beginers Guide to Uncertainty of Measurement</em>. 2nd ed. Teddington, Middlesex, United Kingdom: National Phisical Laboratory. <a href="https://www.npl.co.uk/special-pages/guides/gpg11_uncertainty">https://www.npl.co.uk/special-pages/guides/gpg11_uncertainty</a>.
</div>
<div id="ref-Cano2012" class="csl-entry">
Emilio L. Cano, Andrés Redchuk, Javier M. Moguerza. 2012. <em>Six Sigma with r</em>. 1th ed. Vol. 36. Use r! Springer New York Heidelberg Dordrecht London: Springer.
</div>
<div id="ref-Montgomery2012" class="csl-entry">
Montgomery, Douglas C. 2012. <em>Design and Analysis of Experiments</em>. 8th ed. Wiley.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="design-for-six-sigma.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="DOE.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": false,
"info": false,
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
