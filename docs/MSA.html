<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Measurement System Analysis | industRial data science</title>
  <meta name="description" content="Measurement System Analysis | industRial data science" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Measurement System Analysis | industRial data science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/img/cover3.png" />
  
  <meta name="github-repo" content="J-Ramalho/industRialds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Measurement System Analysis | industRial data science" />
  
  
  <meta name="twitter:image" content="/img/cover3.png" />

<meta name="author" content="João Ramalho" />


<meta name="date" content="2021-05-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="design-for-six-sigma.html"/>
<link rel="next" href="DOE.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122820355-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-122820355-1');
</script>


<script type="text/javascript">
mattcrump=1;
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="industRialds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">industRial data science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html"><i class="fa fa-check"></i>Table of Contents</a></li>
<li class="part"><span><b>I TOOLBOX</b></span></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i>R Packages</a>
<ul>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#six-sigma"><i class="fa fa-check"></i>six sigma</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#qcc"><i class="fa fa-check"></i>qcc</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#qicharts2"><i class="fa fa-check"></i>qicharts2</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#doe.base"><i class="fa fa-check"></i>DoE.base</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#car"><i class="fa fa-check"></i>car</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datasets.html"><a href="datasets.html"><i class="fa fa-check"></i>Datasets</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="tutorials.html"><a href="tutorials.html"><i class="fa fa-check"></i>Tutorials</a></li>
<li class="part"><span><b>II CASE STUDIES</b></span></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html"><i class="fa fa-check"></i>Design for Six Sigma</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#pareto"><i class="fa fa-check"></i>Pareto</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#ishikawa"><i class="fa fa-check"></i>Ishikawa</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#correlation-matrix"><i class="fa fa-check"></i>Correlation matrix</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#clustering"><i class="fa fa-check"></i>Clustering</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html"><i class="fa fa-check"></i>Measurement System Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#trueness"><i class="fa fa-check"></i>Trueness</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#bias-plot"><i class="fa fa-check"></i>Bias plot</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#bias-report"><i class="fa fa-check"></i>Bias report</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#precision"><i class="fa fa-check"></i>Precision</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#base-anova"><i class="fa fa-check"></i>Base Anova</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#gage-rr"><i class="fa fa-check"></i>gage r&amp;R</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#acceptance-on-variance"><i class="fa fa-check"></i>Acceptance on Variance</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#acceptance-on-sd"><i class="fa fa-check"></i>Acceptance on SD</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#interaction-plots"><i class="fa fa-check"></i>Interaction plots</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#negative-variations"><i class="fa fa-check"></i>Negative Variations</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#beyond-two-factors"><i class="fa fa-check"></i>Beyond two factors</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#conclusions"><i class="fa fa-check"></i>Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#uncertainty"><i class="fa fa-check"></i>Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html"><i class="fa fa-check"></i>Design of Experiments</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#simple-experiments"><i class="fa fa-check"></i>Simple experiments</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#means-comparison"><i class="fa fa-check"></i>Means comparison</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#variances-comparison"><i class="fa fa-check"></i>Variances comparison</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#regression-and-anova"><i class="fa fa-check"></i>Regression and anova</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#linear-regression"><i class="fa fa-check"></i>Linear regression</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#residuals-model-check"><i class="fa fa-check"></i>Residuals &amp; model check</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#multiple-means-comparison"><i class="fa fa-check"></i>Multiple means comparison</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#pairwise-comparisons"><i class="fa fa-check"></i>Pairwise comparisons</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#prediction"><i class="fa fa-check"></i>Prediction</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interactions"><i class="fa fa-check"></i>Interactions</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#lm-with-interactions"><i class="fa fa-check"></i>lm with interactions</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#outliers-and-model-check"><i class="fa fa-check"></i>Outliers and model check</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interaction-plot"><i class="fa fa-check"></i>Interaction plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#effects-significance"><i class="fa fa-check"></i>Effects significance</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#removing-interaction"><i class="fa fa-check"></i>Removing interaction</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#covariance"><i class="fa fa-check"></i>Covariance</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#correlation-strenght"><i class="fa fa-check"></i>Correlation strenght</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#ancova"><i class="fa fa-check"></i>Ancova</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#comparison-with-anova"><i class="fa fa-check"></i>Comparison with anova</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#general-factorial-designs"><i class="fa fa-check"></i>General factorial designs</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#design-generaction"><i class="fa fa-check"></i>Design generaction</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#main-effects-plots"><i class="fa fa-check"></i>Main effects plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interactions-plots"><i class="fa fa-check"></i>Interactions plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova-with-3rd-level-interactions"><i class="fa fa-check"></i>Anova with 3rd level interactions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#two-level-designs"><i class="fa fa-check"></i>Two level designs</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#coding-factors"><i class="fa fa-check"></i>Coding factors</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#coding-natural-values"><i class="fa fa-check"></i>Coding natural values</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#single-replicate-designs"><i class="fa fa-check"></i>Single replicate designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html"><i class="fa fa-check"></i>Statistical Process Control</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#xbar-r-charts"><i class="fa fa-check"></i>xbar-R charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#mean-chart"><i class="fa fa-check"></i>Mean chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#range-chart"><i class="fa fa-check"></i>Range chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#control-limits"><i class="fa fa-check"></i>Control limits</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#cpk-charts"><i class="fa fa-check"></i>Cpk charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#off-spec"><i class="fa fa-check"></i>Off spec</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#capability-chart"><i class="fa fa-check"></i>Capability chart</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#i-mr-charts"><i class="fa fa-check"></i>I-MR charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#process-stats"><i class="fa fa-check"></i>Process stats</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#individual-chart"><i class="fa fa-check"></i>Individual chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#moving-range-chart"><i class="fa fa-check"></i>Moving range chart</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#capability-chart-ii"><i class="fa fa-check"></i>Capability chart II</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III APPENDIX</b></span></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a>
<ul>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#statistics"><i class="fa fa-check"></i>Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#notation-conventions"><i class="fa fa-check"></i>Notation conventions</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#probability"><i class="fa fa-check"></i>Probability</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#statistical-inference"><i class="fa fa-check"></i>Statistical Inference</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#dfss"><i class="fa fa-check"></i>DFSS</a>
<ul>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#voice-of-customer"><i class="fa fa-check"></i>Voice of Customer</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#voice-of-process"><i class="fa fa-check"></i>Voice of Process</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#msa"><i class="fa fa-check"></i>MSA</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html#doe"><i class="fa fa-check"></i>DOE</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="imprint.html"><a href="imprint.html"><i class="fa fa-check"></i>Imprint</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">indust<b style='color:#38598CFF'>R</b>ial data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="MSA" class="section level1">
<h1>Measurement System Analysis</h1>
<p>Validation of a measurement device</p>
<div id="trueness" class="section level2">
<h2>Trueness</h2>
<p><strong>The juice production plant</strong></p>
<p>The Quality Control Manager of a Juice producing plant acquired a faster dry matter content measurement device from the supplier DRX. An important reduction of the control time was the rational for the acquisition and now before finally putting it into operation its performance is being assessed and validated.</p>
<div class="marginnote">
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<img src="img/juice_bottling_bw.jpg" alt="juice bottling line" width="100%" />
<p class="caption">
Figure 1: juice bottling line
</p>
</div>
</div>
<p>In this case study we will look into the assessment of the linearity which is the difference in average bias throughout the measurement range.</p>
<p>Dry matter content for the company top seller juice_bottling have around 12% dry matter as for example Premium Fresh Apple juice: 12.4 % and Austrian Beetroot: 13.2% and some other specialities may have a higher content up such as Organic Carrot with 16.3%.</p>
<p>It has been decided to start by checking the equipement in the range of 10 to 20% dry matter content.</p>
<p>Lets look into the measurements obtained on the juice bottling process:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="MSA.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(juice_drymatter)</span></code></pre></div>
<pre><code>   product          drymatter_TGT     speed      particle_size      part  
 Length:108         Min.   :10    Min.   :20.0   Min.   :250   Min.   :1  
 Class :character   1st Qu.:10    1st Qu.:20.0   1st Qu.:250   1st Qu.:1  
 Mode  :character   Median :15    Median :22.5   Median :275   Median :2  
                    Mean   :15    Mean   :22.5   Mean   :275   Mean   :2  
                    3rd Qu.:20    3rd Qu.:25.0   3rd Qu.:300   3rd Qu.:3  
                    Max.   :20    Max.   :25.0   Max.   :300   Max.   :3  
 drymatter_DRX    drymatter_REF  
 Min.   : 9.720   Min.   : 9.97  
 1st Qu.: 9.898   1st Qu.:10.02  
 Median :14.700   Median :15.01  
 Mean   :14.706   Mean   :15.00  
 3rd Qu.:19.503   3rd Qu.:20.00  
 Max.   :19.710   Max.   :20.03  </code></pre>
<p>we see raw data for the DRX and Ref equipment allowing us to calculate the difference between the two devices for each measurement:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="MSA.html#cb39-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter <span class="ot">&lt;-</span> juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="MSA.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bias =</span> drymatter_DRX <span class="sc">-</span> drymatter_REF, <span class="at">part =</span> <span class="fu">as_factor</span>(part))</span>
<span id="cb39-3"><a href="MSA.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(juice_drymatter<span class="sc">$</span>bias)</span></code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-0.6300 -0.4025 -0.2850 -0.2979 -0.1875 -0.0700 </code></pre>
<p>We immediatly see a median bias of -0.2
Lets explore further.</p>
<div id="bias-plot" class="section level3">
<h3>Bias plot</h3>
<p><span id="geom_smooth"></span></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="MSA.html#cb41-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="MSA.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> drymatter_REF, <span class="at">y =</span> bias)) <span class="sc">+</span></span>
<span id="cb41-3"><a href="MSA.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb41-4"><a href="MSA.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> T, ) <span class="sc">+</span></span>
<span id="cb41-5"><a href="MSA.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb41-6"><a href="MSA.html#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">9</span>,<span class="dv">21</span>),</span>
<span id="cb41-7"><a href="MSA.html#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">75</span>,<span class="dv">0</span>), <span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb41-8"><a href="MSA.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_industRial</span>() <span class="sc">+</span></span>
<span id="cb41-9"><a href="MSA.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dry matter method validation&quot;</span>,</span>
<span id="cb41-10"><a href="MSA.html#cb41-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Gage Linearity&quot;</span>,</span>
<span id="cb41-11"><a href="MSA.html#cb41-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Dataset: juice_drymatter233A, Operator: S.Jonathan)&quot;</span>)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/unnamed-chunk-5-1.png" width="80%" /></p>
<p>The linear model is well adapted in this case, this by seing the position of the slope close to the averages of each level of the factor. Nevertheless the slope is rather steep showing a clear increase of the bias (in the negative direction) with the increase in dry matter content.</p>
</div>
<div id="bias-report" class="section level3">
<h3>Bias report</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="MSA.html#cb42-1" aria-hidden="true" tabindex="-1"></a>juice_drymatter <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="MSA.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drymatter_TGT) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="MSA.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">bias_mean =</span> <span class="fu">mean</span>(bias, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb42-4"><a href="MSA.html#cb42-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">bias_median =</span> <span class="fu">median</span>(bias, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="MSA.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(drymatter_TGT, bias_mean, bias_median) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="MSA.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">drymatter_TGT</th>
<th align="center">bias_mean</th>
<th align="center">bias_median</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">10</td>
<td align="center">-0.17</td>
<td align="center">-0.15</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">-0.29</td>
<td align="center">-0.31</td>
</tr>
<tr class="odd">
<td align="center">20</td>
<td align="center">-0.44</td>
<td align="center">-0.44</td>
</tr>
</tbody>
</table>
<p>Mean and median bias are very close. A decision now needs to be taken on which systematic offset to apply depending on the operational context. If most products on the line where the device is used a simplified operational procedure with a unique offset of 0.2 can be sufficient.</p>
</div>
</div>
<div id="precision" class="section level2">
<h2>Precision</h2>
<p><strong>The tablet compaction process</strong></p>
<p>Modern pharmaceutical tablet presses reach output volumes of up to 1,700,000 tablets per hour. These huge volumes require frequent in-process quality control for the tablet weight, thickness and hardness.</p>
<p>In our case study we’re going to measurement the precision of the measurement method used to determine the thickness of the tablet.</p>
<div class="marginnote">
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-7"></span>
<img src="img/tablet_micrometer.png" alt="Tablet thickness micrometer" width="100%" />
<p class="caption">
Figure 5: Tablet thickness micrometer
</p>
</div>
</div>
<p>According to the ISO 5725 the Precision of a measurement method is the combination of the Reproductibility &amp; Reproducibility.</p>
<p><strong>Data loading</strong></p>
<p>We use here the data from the tablet thickness method validation:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="MSA.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tablet_thickness)</span></code></pre></div>
<pre><code>spec_tbl_df[,11] [675 × 11] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ Position             : chr [1:675] &quot;Position 1&quot; &quot;Position 1&quot; &quot;Position 1&quot; &quot;Position 1&quot; ...
 $ Size                 : chr [1:675] &quot;L&quot; &quot;L&quot; &quot;L&quot; &quot;L&quot; ...
 $ Tablet               : chr [1:675] &quot;L001&quot; &quot;L001&quot; &quot;L001&quot; &quot;L001&quot; ...
 $ Replicate            : num [1:675] 1 2 3 4 5 1 2 3 4 5 ...
 $ Day                  : chr [1:675] &quot;Day 1&quot; &quot;Day 1&quot; &quot;Day 1&quot; &quot;Day 1&quot; ...
 $ Date [DD.MM.YYYY]    : chr [1:675] &quot;18/11/2020&quot; &quot;18/11/2020&quot; &quot;18/11/2020&quot; &quot;18/11/2020&quot; ...
 $ Operator             : chr [1:675] &quot;Paulo&quot; &quot;Paulo&quot; &quot;Paulo&quot; &quot;Paulo&quot; ...
 $ Thickness [micron]   : num [1:675] 1803 1803 1804 1804 1803 ...
 $ Temperature [°C]     : num [1:675] 22.3 22.3 22.3 22.4 22.6 22.9 22.8 22.8 22.7 22.7 ...
 $ Relative Humidity [%]: num [1:675] 32.7 32.8 32.8 33.4 33.4 36 36.3 36.4 36.6 36.3 ...
 $ Luminescence [lux]   : num [1:675] 569 580 580 584 594 ...
 - attr(*, &quot;spec&quot;)=
  .. cols(
  ..   Position = col_character(),
  ..   Size = col_character(),
  ..   Tablet = col_character(),
  ..   Replicate = col_double(),
  ..   Day = col_character(),
  ..   `Date [DD.MM.YYYY]` = col_character(),
  ..   Operator = col_character(),
  ..   `Thickness [micron]` = col_double(),
  ..   `Temperature [°C]` = col_double(),
  ..   `Relative Humidity [%]` = col_double(),
  ..   `Luminescence [lux]` = col_double()
  .. )</code></pre>
<p>We see that quite an extensive variaty of parameters was collected here including room conditions. We are mostly interested in the tablet size, thickness and operator who has performed the measurement. As these parameters are coded as characters we are going to convert them to factors:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="MSA.html#cb45-1" aria-hidden="true" tabindex="-1"></a>tablet_thickness <span class="ot">&lt;-</span> tablet_thickness <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="MSA.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="MSA.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(size, tablet, operator), as_factor))</span></code></pre></div>
<p>We want to establish an independed r&amp;R by specification size (S, M or L) and so we first filter only for the first size the L.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="MSA.html#cb46-1" aria-hidden="true" tabindex="-1"></a>tablet_L <span class="ot">&lt;-</span> tablet_thickness <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="MSA.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(size <span class="sc">==</span> <span class="st">&quot;L&quot;</span>)</span></code></pre></div>
<div id="base-anova" class="section level3">
<h3>Base Anova</h3>
<p>We’re feeding the aov function from the stats package with operator and tablet factors.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="MSA.html#cb47-1" aria-hidden="true" tabindex="-1"></a>tablet_L_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb47-2"><a href="MSA.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  thickness_micron <span class="sc">~</span> (</span>
<span id="cb47-3"><a href="MSA.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb47-4"><a href="MSA.html#cb47-4" aria-hidden="true" tabindex="-1"></a>    tablet <span class="sc">+</span></span>
<span id="cb47-5"><a href="MSA.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    operator <span class="sc">+</span></span>
<span id="cb47-6"><a href="MSA.html#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2nd order interactions</span></span>
<span id="cb47-7"><a href="MSA.html#cb47-7" aria-hidden="true" tabindex="-1"></a>    operator<span class="sc">:</span>tablet</span>
<span id="cb47-8"><a href="MSA.html#cb47-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb47-9"><a href="MSA.html#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> tablet_L</span>
<span id="cb47-10"><a href="MSA.html#cb47-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-11"><a href="MSA.html#cb47-11" aria-hidden="true" tabindex="-1"></a>tablet_L_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(tablet_L_lm)</span>
<span id="cb47-12"><a href="MSA.html#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tablet_L_aov)</span></code></pre></div>
<pre><code>                 Df Sum Sq Mean Sq F value Pr(&gt;F)    
tablet            4 1707.1   426.8 271.457 &lt;2e-16 ***
operator          2   13.1     6.6   4.177 0.0166 *  
tablet:operator   8   11.2     1.4   0.892 0.5237    
Residuals       210  330.1     1.6                   
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Below we’re recreating the same analysis with the ss.rr function from the Six Sigma package. As the function allows to input the limits we’re also providing in the function arguments the current upper and lower limit of the specification.</p>
<p>tablet L 18’000mm3 +/- 250mm3 (18.0ml +/- 0.25ml)</p>
</div>
<div id="gage-rr" class="section level3">
<h3>gage r&amp;R</h3>
<p><span id="gageRnR"></span></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="MSA.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SixSigma)</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="MSA.html#cb50-1" aria-hidden="true" tabindex="-1"></a>tablet_L_rr <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb50-2"><a href="MSA.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> tablet_L, </span>
<span id="cb50-3"><a href="MSA.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> thickness_micron, </span>
<span id="cb50-4"><a href="MSA.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> tablet, </span>
<span id="cb50-5"><a href="MSA.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb50-6"><a href="MSA.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="dv">1</span>,</span>
<span id="cb50-7"><a href="MSA.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>, <span class="co"># very important otherwise F test not identical to base aov</span></span>
<span id="cb50-8"><a href="MSA.html#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Micrometer FTR600</span><span class="sc">\n</span><span class="st">r&amp;R for tablet thickness&quot;</span>,</span>
<span id="cb50-9"><a href="MSA.html#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Tablet L&quot;</span>,</span>
<span id="cb50-10"><a href="MSA.html#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">1775</span>,</span>
<span id="cb50-11"><a href="MSA.html#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">1825</span></span>
<span id="cb50-12"><a href="MSA.html#cb50-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

                 Df Sum Sq Mean Sq F value Pr(&gt;F)
tablet            4 1707.1   426.8 271.457 &lt;2e-16
operator          2   13.1     6.6   4.177 0.0166
tablet:operator   8   11.2     1.4   0.892 0.5237
Repeatability   210  330.1     1.6               
Total           224 2061.6                       

alpha for removing interaction: 1 

Gage R&amp;R

                      VarComp %Contrib
Total Gage R&amp;R     1.64098201    14.79
  Repeatability    1.57212495    14.17
  Reproducibility  0.06885705     0.62
    operator       0.06885705     0.62
tablet:operator    0.00000000     0.00
Part-To-Part       9.45247729    85.21
Total Variation   11.09345930   100.00

                      VarComp    StdDev  StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     1.64098201 1.2810082  7.686049     38.46      15.37
  Repeatability    1.57212495 1.2538441  7.523064     37.65      15.05
  Reproducibility  0.06885705 0.2624063  1.574438      7.88       3.15
    operator       0.06885705 0.2624063  1.574438      7.88       3.15
tablet:operator    0.00000000 0.0000000  0.000000      0.00       0.00
Part-To-Part       9.45247729 3.0744881 18.446929     92.31      36.89
Total Variation   11.09345930 3.3306845 19.984107    100.00      39.97

Number of Distinct Categories = 3 </code></pre>
<p><img src="4_msa_files/figure-html/unnamed-chunk-13-1.png" width="80%" /></p>
<p>We can observe that the SixSigma package recreates exactly the same anova table, just calling Repeatability to the Residuals and adding an additional line with the total degrees of freedom and the total sum of squares.</p>
<p>Note that the argument alphaLim has been set to 1 to avoid suppressing the interaction which is in this case non significative.</p>
</div>
<div id="acceptance-on-variance" class="section level3">
<h3>Acceptance on Variance</h3>
<p><strong>Criteria for measurement system acceptance:</strong></p>
<p>To evaluate your process variation, compare the Total Gage R&amp;R contribution in the %Contrib column with the values in the list below:</p>
<ul>
<li><p>Less than 1%: the measurement system is acceptable</p></li>
<li><p>Between 1% and 9%: the measurement system is acceptable depending on the application, the cost of the measurement device, cost of repair, or other factors</p></li>
<li><p>Greater than 9%: the measurement system is not acceptable and should be improved.</p></li>
</ul>
</div>
<div id="acceptance-on-sd" class="section level3">
<h3>Acceptance on SD</h3>
<p>The study variation table is established by calculating the square root of each variance (the standard deviation) and by multiplying it by 6 (the six sigma) and then again by comparing each variation with the total variation. Standard deviations are usualy more speaking to the industry professionals. This table also provides a comparison with the specification.</p>
<p><strong>Criteria for measurement system acceptance:</strong></p>
<p>According to the guidelines from the <span class="citation"><a href="#ref-AIAG2010" role="doc-biblioref">Automotive Industry Action Group</a> (<a href="#ref-AIAG2010" role="doc-biblioref">2010</a>)</span>, if your system variation is less than 10% of the process variation, then it is acceptable.</p>
<p>To evaluate your process variation, compare the Total Gage R&amp;R contribution in the %StudyVar column with the values in the list below:</p>
<ul>
<li><p>Less than 10%: the measurement system is acceptable</p></li>
<li><p>Between 10% and 30%: the measurement system is acceptable depending on the application, the cost of the measurement device, cost of repair, or other factors</p></li>
<li><p>Greater that 30%: the measurement system is not acceptable and should be improved.</p></li>
</ul>
<p>If the p-value for the operator and part interaction is 0.05 or higher, the system removes the interaction because it is not significant and generates a second ANOVA table without the interaction.</p>
<p>The AIAG also states that the number of distinct categories into which the measurement system divides process output should be greater or equal to 5.</p>
<p>The part to part variation is high which is what is expected in a study like this.</p>
<p>In our specific example we observe that the device cannot be accepted as the Study variation for the Total Gage r&amp;R is 38.46% thus much higher than 30%. Furhtermore the number of distinc categories is only of 3.</p>
<p>Finaly to be noted that the total variation rather low when compared with the specification.</p>
<p>In a nutshell two questions are answered:</p>
<ul>
<li><p>can the method be used to assess process performance: no the measurement system variation equals 38.4% of the process variation,</p></li>
<li><p>can the method be used to sort good parts from bad: yes but can be improved, the measurement system variation equals 15.3% of the tolerance.</p></li>
</ul>
</div>
<div id="interaction-plots" class="section level3">
<h3>Interaction plots</h3>
<p>The Six Sigma package plots are similar to the interaction plots provided by other DoE packages but don’t have error bars. These can nevertheless easily be established on a needed basis as in the example below where we’re recreating the tablet:operator interaction plot with a +/- 1 standard deviation error bars.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="MSA.html#cb52-1" aria-hidden="true" tabindex="-1"></a>tablet_L <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="MSA.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tablet, operator) <span class="sc">%&gt;%</span></span>
<span id="cb52-3"><a href="MSA.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vol_mean =</span> <span class="fu">mean</span>(thickness_micron), <span class="at">vol_sd =</span> <span class="fu">sd</span>(thickness_micron)) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="MSA.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tablet, <span class="at">y =</span> vol_mean, <span class="at">color =</span> operator)) <span class="sc">+</span></span>
<span id="cb52-5"><a href="MSA.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">group =</span> operator), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb52-6"><a href="MSA.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> operator, <span class="at">linetype =</span> operator)) <span class="sc">+</span></span>
<span id="cb52-7"><a href="MSA.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> vol_mean <span class="sc">-</span> vol_sd, </span>
<span id="cb52-8"><a href="MSA.html#cb52-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> vol_mean <span class="sc">+</span> vol_sd),</span>
<span id="cb52-9"><a href="MSA.html#cb52-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb52-10"><a href="MSA.html#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">big.mark =</span> <span class="st">&quot;&#39;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb52-11"><a href="MSA.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;C&quot;</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb52-12"><a href="MSA.html#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># coord_cartesian(ylim = c(17950, 18150)) +</span></span>
<span id="cb52-13"><a href="MSA.html#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">label =</span> <span class="st">&quot;Error bars are +/- 1xSD&quot;</span>, </span>
<span id="cb52-14"><a href="MSA.html#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb52-15"><a href="MSA.html#cb52-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">&quot;italic&quot;</span>) <span class="sc">+</span></span>
<span id="cb52-16"><a href="MSA.html#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_industRial</span>() <span class="sc">+</span></span>
<span id="cb52-17"><a href="MSA.html#cb52-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Tablet thickness method validation&quot;</span>,</span>
<span id="cb52-18"><a href="MSA.html#cb52-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Interaction plot - L tablet x Operator&quot;</span>,</span>
<span id="cb52-19"><a href="MSA.html#cb52-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb52-20"><a href="MSA.html#cb52-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;thickness [mm]&quot;</span>,</span>
<span id="cb52-21"><a href="MSA.html#cb52-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data source: QA Lab&quot;</span>)</span></code></pre></div>
<p><img src="4_msa_files/figure-html/unnamed-chunk-14-1.png" width="80%" /></p>
</div>
<div id="negative-variations" class="section level3">
<h3>Negative Variations</h3>
<p>Two important limitations exist in the current approach:</p>
<ol style="list-style-type: decimal">
<li>when the operators reproducibility is negative it is converted to zero.</li>
</ol>
<p><span class="citation">(<a href="#ref-Montgomery2012" role="doc-biblioref">Montgomery 2012</a>)</span> in page 557 adresses this case in the following way:</p>
<p><em>Notice that the estimate of one of the variance components,is negative. This is certainly not reasonable because by definition variances are nonnegative. Unfortunately, negative estimates of variance components can result when we use the analysis of variance method of estimation (this is considered one of its drawbacks). We can deal with this negative result in a variety of ways:</em></p>
<p><em>1) one possibility is to assume that the negative estimate means that the variance component is really zero and just set it to zero, leaving the other nonnegative estimates unchanged.</em></p>
<p><em>2) Another approach is to estimate the variance components with a method that assures nonnegative estimates (this can be done with the maximum likelihood approach).</em></p>
<p><em>3) Finally, we could note that the P-value for the interaction term … is very large, take this as evidence that really is zero and that there is no interaction effect, and then fit a reduced model of the form that does not include the interaction term. This is a relatively easy approach and one that often works nearly as well as more sophisticated methods.</em></p>
<p>This final approach is also what the SixSigma package creators have foreseen and if we leave the argument alphaLim empty the non significant terms will be suppressed from the model, the Anova recalculated and the remaining tables updated accordingly. This can be finetuned with the argument alphaLim. Usually we consider a p value of 0.05 but we recommend to start with higher values such as 0.1 or 0.2 to avoid suppressing too quickly the factor which would result in a transfer of their variability into the repeatability.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="MSA.html#cb53-1" aria-hidden="true" tabindex="-1"></a>tablet_L_rr2 <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb53-2"><a href="MSA.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> tablet_L, </span>
<span id="cb53-3"><a href="MSA.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> thickness_micron, </span>
<span id="cb53-4"><a href="MSA.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> tablet, </span>
<span id="cb53-5"><a href="MSA.html#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb53-6"><a href="MSA.html#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="fl">0.2</span>, <span class="co"># instead of 0.05 it is recommended to start higher</span></span>
<span id="cb53-7"><a href="MSA.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>,</span>
<span id="cb53-8"><a href="MSA.html#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Micrometer FTR600</span><span class="sc">\n</span><span class="st">r&amp;R for tablet thickness&quot;</span>,</span>
<span id="cb53-9"><a href="MSA.html#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Tablet L&quot;</span>,</span>
<span id="cb53-10"><a href="MSA.html#cb53-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">1775</span>,</span>
<span id="cb53-11"><a href="MSA.html#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">1825</span></span>
<span id="cb53-12"><a href="MSA.html#cb53-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

                 Df Sum Sq Mean Sq F value Pr(&gt;F)
tablet            4 1707.1   426.8 271.457 &lt;2e-16
operator          2   13.1     6.6   4.177 0.0166
tablet:operator   8   11.2     1.4   0.892 0.5237
Repeatability   210  330.1     1.6               
Total           224 2061.6                       

alpha for removing interaction: 0.2 


Reduced model (without interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
tablet          4 1707.1   426.8 272.533 &lt;2e-16
operator        2   13.1     6.6   4.194 0.0163
Repeatability 218  341.4     1.6               
Total         224 2061.6                       

Gage R&amp;R

                      VarComp %Contrib
Total Gage R&amp;R     1.63260451    14.73
  Repeatability    1.56591940    14.13
  Reproducibility  0.06668511     0.60
    operator       0.06668511     0.60
Part-To-Part       9.44885739    85.27
Total Variation   11.08146189   100.00

                      VarComp    StdDev  StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     1.63260451 1.2777341  7.666405     38.38      15.33
  Repeatability    1.56591940 1.2513670  7.508202     37.59      15.02
  Reproducibility  0.06668511 0.2582346  1.549408      7.76       3.10
    operator       0.06668511 0.2582346  1.549408      7.76       3.10
Part-To-Part       9.44885739 3.0738994 18.443396     92.34      36.89
Total Variation   11.08146189 3.3288830 19.973298    100.00      39.95

Number of Distinct Categories = 3 </code></pre>
<p><img src="4_msa_files/figure-html/unnamed-chunk-15-1.png" width="80%" /></p>
<p>In our case when comparing the total gage r&amp;R with and without the interaction we see it changing from 38.46% to 38.38%.</p>
</div>
<div id="beyond-two-factors" class="section level3">
<h3>Beyond two factors</h3>
<p>The ss.rr function only accepts 2 factors so it is not possible to obtain all the tables and plots with for example the day as a factor.</p>
<p>This significantly limits the calculation of the total uncertainty for some measurement methods. Next steps in our study will be to prepare an R function to deal with more than 2 factors.</p>
</div>
<div id="conclusions" class="section level3">
<h3>Conclusions</h3>
<p>The Six Sigma package r&amp;R approach can be applied with no issue to simple cases with 2 factors (e.g. operators and parts) where the Variance Component of the Reproducibility is not negative.</p>
</div>
</div>
<div id="uncertainty" class="section level2">
<h2>Uncertainty</h2>
<p>A final step in the validation of our measurement device is now the calculation of the total measurement uncertainty.</p>
<p>In some reports the terminology uncertainty is prefered instead of gage r&amp;R.
In this case the formula usually used to evaluate the measurement uncertainty is:</p>
<p><span class="math display">\[
u^2=u_{repeat.}^2+ u_{reprod.}^2+ u_{cal.}^2
\]</span></p>
<p>where the repeatability and reproducibility members can be obtained from the variances calculated in the r&amp;R study</p>
<p><span class="math display">\[
u_{repeat}^2 = σ_{repeat}^2\\
u_{reprod}^2 = σ_{reprod}^2
\]</span>
These variance components can be directly obtained from the object generated by the function ss.rr of the {SixSigma} package. If we name our variable <span class="math inline">\(σ_{repeat}^2\)</span> as repeat_var in R we have:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="MSA.html#cb55-1" aria-hidden="true" tabindex="-1"></a>repeat_var <span class="ot">&lt;-</span> tablet_L_rr<span class="sc">$</span>varComp[<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb55-2"><a href="MSA.html#cb55-2" aria-hidden="true" tabindex="-1"></a>repeat_var</span></code></pre></div>
<pre><code>[1] 1.572125</code></pre>
<p>and for the reproducibility we have:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="MSA.html#cb57-1" aria-hidden="true" tabindex="-1"></a>reprod_var <span class="ot">&lt;-</span> tablet_L_rr<span class="sc">$</span>varComp[<span class="dv">3</span>,<span class="dv">1</span>]</span>
<span id="cb57-2"><a href="MSA.html#cb57-2" aria-hidden="true" tabindex="-1"></a>reprod_var</span></code></pre></div>
<pre><code>[1] 0.06885705</code></pre>
<p>The equipment manual mentions an accuracy of 0.001 mm. If we take this as the calibration uncertainty expressed as a standard deviation, this means we have:</p>
<p><span class="math display">\[
u_{cal} = 0.001 mm \Leftrightarrow 1 \mu m\\
u_{cal}^2 = 1^2 = 1
\]</span>
that we can assign in R to the variable calibration_var.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="MSA.html#cb59-1" aria-hidden="true" tabindex="-1"></a>calibration_var <span class="ot">&lt;-</span> <span class="dv">1</span></span></code></pre></div>
<p>We thus we have a uncertainty of:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="MSA.html#cb60-1" aria-hidden="true" tabindex="-1"></a>u <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(reprod_var <span class="sc">+</span> repeat_var <span class="sc">+</span> calibration_var)</span>
<span id="cb60-2"><a href="MSA.html#cb60-2" aria-hidden="true" tabindex="-1"></a>u</span></code></pre></div>
<pre><code>[1] 1.62511</code></pre>
<p>Finally what is usually reported is the expanded uncertainty corresponding to 2 standard deviations. To be recalled that <span class="math inline">\(\pm\)</span> 2 std corresponds to 95% of the values when a repeative measurement is done. In this case we have <span class="math inline">\(U = 2*u\)</span>:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="MSA.html#cb62-1" aria-hidden="true" tabindex="-1"></a>U <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> u</span>
<span id="cb62-2"><a href="MSA.html#cb62-2" aria-hidden="true" tabindex="-1"></a>U</span></code></pre></div>
<pre><code>[1] 3.25022</code></pre>
<p>For a specific measurement of say 1’800 <span class="math inline">\(\mu m\)</span> we then say: the tablet thickness is 1’800 <span class="math inline">\(\mu m\)</span> <span class="math inline">\(\pm\)</span> 3.3 <span class="math inline">\(\mu m\)</span>, at the 95 percent confidence level. Or written in short:</p>
<p>1’800 <span class="math inline">\(\mu m\)</span> <span class="math inline">\(\pm\)</span> 3.3 <span class="math inline">\(\mu m\)</span>, at a level of confidence of 95%</p>
<p>Knowing that the specification is [1’775; 1’825] <span class="math inline">\(\mu\)</span>m we have a specification range of 500. The expanded uncertainty corresponds to 13 %. This is another way of looking into the ratio between method variation and specification. This {SixSigma} package gave a similar result of 15.37%. To be noted that the calculation in by the package corresponds to 3 standard deviations and does not comprise the supplier calibration.</p>
<p>For further reading on the topic we recommend the booklet from <span class="citation"><a href="#ref-Bell2001" role="doc-biblioref">Bell</a> (<a href="#ref-Bell2001" role="doc-biblioref">2001</a>)</span>.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-AIAG2010" class="csl-entry">
Automotive Industry Action Group, AIAG -, ed. 2010. <a href="https://www.aiag.org/store/publications/details?ProductCode=MSA-4">https://www.aiag.org/store/publications/details?ProductCode=MSA-4</a>.
</div>
<div id="ref-Bell2001" class="csl-entry">
Bell, Stéphanie. 2001. <em>The Beginers Guide to Uncertainty of Measurement</em>. 2nd ed. Teddington, Middlesex, United Kingdom: National Phisical Laboratory. <a href="https://www.npl.co.uk/special-pages/guides/gpg11_uncertainty">https://www.npl.co.uk/special-pages/guides/gpg11_uncertainty</a>.
</div>
<div id="ref-Montgomery2012" class="csl-entry">
Montgomery, Douglas C. 2012. <em>Design and Analysis of Experiments</em>. 8th ed. Wiley.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="design-for-six-sigma.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="DOE.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"search": false,
"info": false,
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
