<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Measurement System Analysis | industRial data science</title>
  <meta name="description" content="Measurement System Analysis | industRial data science" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Measurement System Analysis | industRial data science" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="img/cover3.png" />
  
  <meta name="github-repo" content="J-Ramalho/industRialds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Measurement System Analysis | industRial data science" />
  
  
  <meta name="twitter:image" content="img/cover3.png" />

<meta name="author" content="João Ramalho" />


<meta name="date" content="2021-03-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="design-for-six-sigma.html"/>
<link rel="next" href="DOE.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122820355-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-122820355-1');
</script>


<script type="text/javascript">
mattcrump=1;
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="tufte.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">industRial data science</a></li>

<li class="divider"></li>
<li class="part"><span><b>I SETUP</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i>Foundations</a>
<ul>
<li class="chapter" data-level="" data-path="foundations.html"><a href="foundations.html#six-sigma"><i class="fa fa-check"></i>Six Sigma</a></li>
<li class="chapter" data-level="" data-path="foundations.html"><a href="foundations.html#statistics"><i class="fa fa-check"></i>Statistics</a></li>
<li class="chapter" data-level="" data-path="foundations.html"><a href="foundations.html#r-programming"><i class="fa fa-check"></i>R programming</a></li>
</ul></li>
<li class="part"><span><b>II CASE STUDIES</b></span></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html"><i class="fa fa-check"></i>Design for Six Sigma</a>
<ul>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#pareto"><i class="fa fa-check"></i>Pareto</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#ishikawa"><i class="fa fa-check"></i>Ishikawa</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#correlation-matrix"><i class="fa fa-check"></i>Correlation matrix</a></li>
<li class="chapter" data-level="" data-path="design-for-six-sigma.html"><a href="design-for-six-sigma.html#clustering"><i class="fa fa-check"></i>Clustering</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html"><i class="fa fa-check"></i>Measurement System Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#robustness"><i class="fa fa-check"></i>Robustness</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#linearity"><i class="fa fa-check"></i>Linearity</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#plot-of-bias-data"><i class="fa fa-check"></i>Plot of bias data</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#model-of-bias-vs-reference-value"><i class="fa fa-check"></i>Model of bias vs reference value</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#model-of-bias-check"><i class="fa fa-check"></i>Model of bias check</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#trueness"><i class="fa fa-check"></i>Trueness</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#precision"><i class="fa fa-check"></i>Precision</a>
<ul>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#base-anova"><i class="fa fa-check"></i>Base Anova</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#study"><i class="fa fa-check"></i>Study</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#acceptance-on-variance"><i class="fa fa-check"></i>Acceptance on Variance</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#acceptance-on-sd"><i class="fa fa-check"></i>Acceptance on SD</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#interaction-plots"><i class="fa fa-check"></i>Interaction plots</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#negative-variations"><i class="fa fa-check"></i>Negative Variations</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#beyond-two-factors"><i class="fa fa-check"></i>Beyond two factors</a></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#conclusions"><i class="fa fa-check"></i>Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="MSA.html"><a href="MSA.html#uncertainty"><i class="fa fa-check"></i>Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html"><i class="fa fa-check"></i>Design of Experiments</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#one-factor-two-levels"><i class="fa fa-check"></i>One factor two levels</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#two-means-comparison"><i class="fa fa-check"></i>Two means comparison</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#two-variances-comparison"><i class="fa fa-check"></i>Two variances comparison</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#sample-size"><i class="fa fa-check"></i>Sample size</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#one-factor-multiple-levels"><i class="fa fa-check"></i>One factor multiple levels</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#linear-regression"><i class="fa fa-check"></i>Linear regression</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#model-check-residuals"><i class="fa fa-check"></i>Model check &amp; residuals</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#multiple-means-comparison"><i class="fa fa-check"></i>Multiple means comparison</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#pairwise-comparisons"><i class="fa fa-check"></i>Pairwise comparisons</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#predict"><i class="fa fa-check"></i>Prediction</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#means-comparison-covariance"><i class="fa fa-check"></i>Means comparison &amp; covariance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#two-factors-multiple-levels"><i class="fa fa-check"></i>Two factors multiple levels</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#linear-regression-with-interactions"><i class="fa fa-check"></i>Linear regression with interactions</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#model-check-outliers"><i class="fa fa-check"></i>Model check &amp; outliers</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interactionPlot"><i class="fa fa-check"></i>Interaction plot</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#effects-significance"><i class="fa fa-check"></i>Effects significance</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#removing-interaction"><i class="fa fa-check"></i>Removing interaction</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#multiple-factors"><i class="fa fa-check"></i>Multiple factors</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#main-effects-plots"><i class="fa fa-check"></i>Main effects plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#model-with-3rd-level-interactions"><i class="fa fa-check"></i>Model with 3rd level interactions</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interactions-plots"><i class="fa fa-check"></i>Interactions plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova-with-3rd-level-interactions"><i class="fa fa-check"></i>Anova with 3rd level interactions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#factorial-design"><i class="fa fa-check"></i>2^2 factorial design</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#linear-model-with-and--"><i class="fa fa-check"></i>Linear model with + and -</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova-with-and--"><i class="fa fa-check"></i>Anova with + and -</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#interaction-plots-with-sd-bars"><i class="fa fa-check"></i>Interaction plots with sd bars</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#outputs-correlation"><i class="fa fa-check"></i>Outputs correlation</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#levels-coding-with-1-and--1"><i class="fa fa-check"></i>Levels coding with +1 and -1</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#model-with-1-and--1"><i class="fa fa-check"></i>Model with 1 and -1</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#prediction-with-1-and--1"><i class="fa fa-check"></i>Prediction with 1 and -1</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#factorial-design-1"><i class="fa fa-check"></i>2^3 factorial design</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#main-effects-box-plots"><i class="fa fa-check"></i>Main effects box plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#converting-levels-to-numeric"><i class="fa fa-check"></i>Converting levels to numeric</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#model-with-numeric-levels"><i class="fa fa-check"></i>Model with numeric levels</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#prediction-with-numeric-levels"><i class="fa fa-check"></i>Prediction with numeric levels</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#reduced-model-removing-levels"><i class="fa fa-check"></i>Reduced model (removing levels)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#k-factorial-design"><i class="fa fa-check"></i>2^k factorial design</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#combinations"><i class="fa fa-check"></i>Combinations</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#coded-vs-natural-variables"><i class="fa fa-check"></i>Coded vs natural variables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#k-single-replicate-design"><i class="fa fa-check"></i>2^k single replicate design</a>
<ul>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#main-effects-data-plots"><i class="fa fa-check"></i>Main effects data plots</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#linear-model-single-replicate"><i class="fa fa-check"></i>Linear model single replicate</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova-single-replicate"><i class="fa fa-check"></i>Anova single replicate</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#linear-regression---plot-of-effects"><i class="fa fa-check"></i>Linear regression - Plot of effects</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#anova-reduced-model-significant-effects-only"><i class="fa fa-check"></i>Anova reduced model (significant effects only)</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#reduced-model"><i class="fa fa-check"></i>Reduced model</a></li>
<li class="chapter" data-level="" data-path="DOE.html"><a href="DOE.html#reduced-model-check"><i class="fa fa-check"></i>Reduced model check</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html"><i class="fa fa-check"></i>Statistical Process Control</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#control-charts"><i class="fa fa-check"></i>Control charts</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#xbar-and-r-charts"><i class="fa fa-check"></i>xbar and R charts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#process-capability"><i class="fa fa-check"></i>Process Capability</a>
<ul>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#out-of-specification"><i class="fa fa-check"></i>Out of specification</a></li>
<li class="chapter" data-level="" data-path="SPC.html"><a href="SPC.html#cpk-index"><i class="fa fa-check"></i>Cpk index</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III TOOLBOX</b></span></li>
<li class="chapter" data-level="" data-path="r-functions-index.html"><a href="r-functions-index.html"><i class="fa fa-check"></i>R Functions index</a></li>
<li class="chapter" data-level="" data-path="r-datasets.html"><a href="r-datasets.html"><i class="fa fa-check"></i>R Datasets</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i>R Packages</a>
<ul>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#domain-packages"><i class="fa fa-check"></i>Domain packages</a>
<ul>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#industrial"><i class="fa fa-check"></i>industRial</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#six-sigma-1"><i class="fa fa-check"></i>six sigma</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#qcc"><i class="fa fa-check"></i>qcc</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#qicharts2"><i class="fa fa-check"></i>qicharts2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#other-packages"><i class="fa fa-check"></i>Other packages</a></li>
<li class="chapter" data-level="" data-path="r-packages.html"><a href="r-packages.html#r-session-info"><i class="fa fa-check"></i>R Session info</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">indust<b style='color:#4775d1'>R</b>ial data science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="MSA" class="section level1">
<h1>Measurement System Analysis</h1>
<p>Validation of a measurement device</p>
<div id="robustness" class="section level2">
<h2>Robustness</h2>
<p>In the Six Sigma chapter we presented the Ishikawa diagram <a href="design-for-six-sigma.html#fig:fig-ishikawa">2</a>. The identification of the factors for which to verify a measurement system robustness is a typical case where we can make good use of such tool and properly list the environmental factors that may influence the measurement.</p>
</div>
<div id="linearity" class="section level2">
<h2>Linearity</h2>
<p>The Quality Control Manager of a Juice producing plant acquired a faster dry matter content measurement device from the supplier DRX. An important reduction of the control time was the rational for the acquisition and now before finally putting it into operation its performance is being assessed and validated.</p>
<div class="marginnote">
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<img src="img/juice_bottling_bw.jpg" alt="juice bottling line" width="100%" />
<p class="caption">
Figure 1: juice bottling line
</p>
</div>
</div>
<p>In this case study we will look into the assessment of the linearity which is the difference in average bias throughout the measurement range.</p>
<p>Dry matter content for the company top seller juices have around 12% dry matter as for example Premium Fresh Apple juice: 12.4 % and Austrian Beetroot: 13.2% and some other specialities may have a higher content up such as Organic Carrot with 16.3%.</p>
<p>It has been decided to start by checking the equipement in the range of 10 to 20% dry matter content.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="MSA.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-2"><a href="MSA.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb24-3"><a href="MSA.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb24-4"><a href="MSA.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb24-5"><a href="MSA.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stats)</span>
<span id="cb24-6"><a href="MSA.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SixSigma)</span>
<span id="cb24-7"><a href="MSA.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb24-8"><a href="MSA.html#cb24-8" aria-hidden="true" tabindex="-1"></a>filter <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>filter</span>
<span id="cb24-9"><a href="MSA.html#cb24-9" aria-hidden="true" tabindex="-1"></a>select <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>select</span></code></pre></div>
<p>Data loading</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="MSA.html#cb25-1" aria-hidden="true" tabindex="-1"></a>juices <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">&quot;../industRial/data-raw/juices.xlsx&quot;</span>) </span>
<span id="cb25-2"><a href="MSA.html#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="MSA.html#cb25-3" aria-hidden="true" tabindex="-1"></a>juices <span class="ot">&lt;-</span> juices <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="MSA.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bias =</span> DRX <span class="sc">-</span> Ref)</span></code></pre></div>
<div id="plot-of-bias-data" class="section level3">
<h3>Plot of bias data</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="MSA.html#cb26-1" aria-hidden="true" tabindex="-1"></a>juices <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="MSA.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Ref, <span class="at">y =</span> bias)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="MSA.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb26-4"><a href="MSA.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> T, ) <span class="sc">+</span></span>
<span id="cb26-5"><a href="MSA.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb26-6"><a href="MSA.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># facet_grid(~dissolution) +</span></span>
<span id="cb26-7"><a href="MSA.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dry matter method validation&quot;</span>,</span>
<span id="cb26-8"><a href="MSA.html#cb26-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Gage Linearity&quot;</span>,</span>
<span id="cb26-9"><a href="MSA.html#cb26-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Dataset: juices233A, Operator: S.Jonathan)&quot;</span>)</span></code></pre></div>
<p><img src="msa_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The linear model seems well adapted in this case, seing the position of the slope close to the averages of each level of the factor. Nevertheless the slope is rather steep showing a clear increase of the bias (in the negative direction) with the increase in dry matter content.</p>
</div>
<div id="model-of-bias-vs-reference-value" class="section level3">
<h3>Model of bias vs reference value</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="MSA.html#cb27-1" aria-hidden="true" tabindex="-1"></a>juices_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(bias <span class="sc">~</span> Ref,</span>
<span id="cb27-2"><a href="MSA.html#cb27-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">data =</span> juices)</span>
<span id="cb27-3"><a href="MSA.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(juices_lm)</span></code></pre></div>
<pre><code>
Call:
lm(formula = bias ~ Ref, data = juices)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.127294 -0.033944  0.002439  0.027884  0.162171 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.182977   0.031147   5.875 3.04e-07 ***
Ref         -0.026744   0.002001 -13.364  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.06002 on 52 degrees of freedom
Multiple R-squared:  0.7745,    Adjusted R-squared:  0.7702 
F-statistic: 178.6 on 1 and 52 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="model-of-bias-check" class="section level3">
<h3>Model of bias check</h3>
<p>We observe a very high correlation of the model with an R squared of 82%.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="MSA.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb29-2"><a href="MSA.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(juices_lm)</span></code></pre></div>
<p><img src="msa_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>The qq plot shows a strong deviation from the normality for the 2nd upper quantile. Care should be taken in defining the bias for the 25% dissolution.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="MSA.html#cb30-1" aria-hidden="true" tabindex="-1"></a>juices_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(juices_lm)</span>
<span id="cb30-2"><a href="MSA.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(juices_aov)</span></code></pre></div>
<pre><code>            Df Sum Sq Mean Sq F value Pr(&gt;F)    
Ref          1 0.6433  0.6433   178.6 &lt;2e-16 ***
Residuals   52 0.1873  0.0036                   
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>As expected the anova confirms strong influence of the dissolution level on the bias.</p>
</div>
</div>
<div id="trueness" class="section level2">
<h2>Trueness</h2>
<p>(Bias)</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="MSA.html#cb32-1" aria-hidden="true" tabindex="-1"></a>juices_bias <span class="ot">&lt;-</span> juices <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="MSA.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(target) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="MSA.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">av_bias =</span> <span class="fu">mean</span>(bias))</span>
<span id="cb32-4"><a href="MSA.html#cb32-4" aria-hidden="true" tabindex="-1"></a>juices_bias <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="MSA.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(target, av_bias) <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="MSA.html#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="center">target</th>
<th align="center">av_bias</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">10</td>
<td align="center">-0.0855556</td>
</tr>
<tr class="even">
<td align="center">15</td>
<td align="center">-0.2177778</td>
</tr>
<tr class="odd">
<td align="center">20</td>
<td align="center">-0.3527778</td>
</tr>
</tbody>
</table>
</div>
<div id="precision" class="section level2">
<h2>Precision</h2>
<p>reproductibility &amp; reproducibility</p>
<p><strong>Objective</strong></p>
<p>The objective of this document is to assess the scope of utilisation of the r&amp;R for a measurement method using the Six Sigma package from R. A comparison with base R anova and with Minitab r&amp;R is also done. This report is accompaigned by a “CheatSheet” excel file with formulas allowing to understand and easily confirm the SixSigma package calculations.</p>
<p>The randomization is an important aspect that was not mentionned here but that needs to be taken in consideration in the data collection.</p>
<p>Data loading</p>
<p>We use here the data from the axis volume method validation:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="MSA.html#cb33-1" aria-hidden="true" tabindex="-1"></a>axis <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;../industRial/data-raw/rnR_case_study.xlsx&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="MSA.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">size =</span> <span class="fu">as_factor</span>(size)) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="MSA.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">axis =</span> <span class="fu">as_factor</span>(axis)) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="MSA.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">operator =</span> <span class="fu">as_factor</span>(operator)) <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="MSA.html#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">fct_inorder</span>(day))</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="MSA.html#cb34-1" aria-hidden="true" tabindex="-1"></a>axis_L <span class="ot">&lt;-</span> axis <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="MSA.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(size <span class="sc">==</span> <span class="st">&quot;L&quot;</span>)</span></code></pre></div>
<div id="base-anova" class="section level3">
<h3>Base Anova</h3>
<p>We’re feeding the aov function from the stats package with operator and axis factors.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="MSA.html#cb35-1" aria-hidden="true" tabindex="-1"></a>axis_L_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb35-2"><a href="MSA.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  volume_mm3 <span class="sc">~</span> (</span>
<span id="cb35-3"><a href="MSA.html#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb35-4"><a href="MSA.html#cb35-4" aria-hidden="true" tabindex="-1"></a>    axis <span class="sc">+</span></span>
<span id="cb35-5"><a href="MSA.html#cb35-5" aria-hidden="true" tabindex="-1"></a>    operator <span class="sc">+</span></span>
<span id="cb35-6"><a href="MSA.html#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2nd order interactions</span></span>
<span id="cb35-7"><a href="MSA.html#cb35-7" aria-hidden="true" tabindex="-1"></a>    operator<span class="sc">:</span>axis</span>
<span id="cb35-8"><a href="MSA.html#cb35-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-9"><a href="MSA.html#cb35-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> axis_L</span>
<span id="cb35-10"><a href="MSA.html#cb35-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-11"><a href="MSA.html#cb35-11" aria-hidden="true" tabindex="-1"></a>axis_L_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(axis_L_lm)</span>
<span id="cb35-12"><a href="MSA.html#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(axis_L_aov)</span></code></pre></div>
<pre><code>               Df Sum Sq Mean Sq F value Pr(&gt;F)    
axis            4 170707   42677 271.450 &lt;2e-16 ***
operator        2   1313     657   4.176 0.0167 *  
axis:operator   8   1122     140   0.892 0.5237    
Residuals     210  33016     157                   
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<ul>
<li>axis (Part): The variation that comes from the parts, with 5 levels in this case</li>
<li>operator: The variation that comes from the operators, with 3 levels in this case</li>
<li>Operator*Part: The variation that comes from the operator and part interaction. An interaction exists when an operator measures different parts differently.</li>
<li>repeatability (or error, or residuals): The variation that is not explained by part, operator, or the operator and part interaction.
Variance</li>
<li>n: number of replicants, 15 in this case (not presented in the table)</li>
</ul>
<p>These are used for establishing the Variance Components and Study Variation tables that are exactly the same that are obtained with Minitab.</p>
</div>
<div id="study" class="section level3">
<h3>Study</h3>
<p>Below we’re recreating the same analysis with the ss.rr function from the Six Sigma package. As the function allows to input the limits we’re also providing in the function arguments the current upper and lower limit of the specification.</p>
<p>axis L 18’000mm3 +/- 250mm3 (18.0ml +/- 0.25ml)</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="MSA.html#cb37-1" aria-hidden="true" tabindex="-1"></a>axis_L_rr <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb37-2"><a href="MSA.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> axis_L, </span>
<span id="cb37-3"><a href="MSA.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> volume_mm3, </span>
<span id="cb37-4"><a href="MSA.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> axis, </span>
<span id="cb37-5"><a href="MSA.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb37-6"><a href="MSA.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="dv">1</span>,</span>
<span id="cb37-7"><a href="MSA.html#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>, <span class="co"># very important otherwise F test not identical to base aov</span></span>
<span id="cb37-8"><a href="MSA.html#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Scanner x2000</span><span class="sc">\n</span><span class="st">r&amp;R for axis Volume&quot;</span>,</span>
<span id="cb37-9"><a href="MSA.html#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;axis L&quot;</span>,</span>
<span id="cb37-10"><a href="MSA.html#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">17750</span>,</span>
<span id="cb37-11"><a href="MSA.html#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">18250</span></span>
<span id="cb37-12"><a href="MSA.html#cb37-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
axis            4 170707   42677 271.450 &lt;2e-16
operator        2   1313     657   4.176 0.0167
axis:operator   8   1122     140   0.892 0.5237
Repeatability 210  33016     157               
Total         224 206158                       

alpha for removing interaction: 1 

Gage R&amp;R

                     VarComp %Contrib
Total Gage R&amp;R     164.10066    14.79
  Repeatability    157.21730    14.17
  Reproducibility    6.88336     0.62
    operator         6.88336     0.62
axis:operator        0.00000     0.00
Part-To-Part       945.25173    85.21
Total Variation   1109.35239   100.00

                     VarComp    StdDev  StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     164.10066 12.810178  76.86107     38.46      15.37
  Repeatability    157.21730 12.538632  75.23179     37.65      15.05
  Reproducibility    6.88336  2.623616  15.74170      7.88       3.15
    operator         6.88336  2.623616  15.74170      7.88       3.15
axis:operator        0.00000  0.000000   0.00000      0.00       0.00
Part-To-Part       945.25173 30.744946 184.46968     92.31      36.89
Total Variation   1109.35239 33.306942 199.84165    100.00      39.97

Number of Distinct Categories = 3 </code></pre>
<p><img src="msa_files/figure-html/unnamed-chunk-13-1.png" width="768" /></p>
<p>We can observe that the SixSigma package recreates exactly the same anova table, just calling Repeatability to the Residuals and adding an additional line with the total degrees of freedom and the total sum of squares.</p>
<p>Note that the argument alphaLim has been set to 1 to avoid suppressing the interaction which is in this case non significative.</p>
</div>
<div id="acceptance-on-variance" class="section level3">
<h3>Acceptance on Variance</h3>
<p>Variance components assess the amount of variation contributed by each source of measurement error, plus the contribution of part-to-part variability.</p>
<ul>
<li>total gage r&amp;R: the sum of the repeatability and the reproducibility variance components</li>
<li>repeatability: how much variability is caused by the measurement device (the same operator measures the same part many times, using the same gage). The repeteability can be measured directly from the Anova table from the residual mean squares</li>
<li>reproducibility: how much variation is caused by the differences between operators (different operators measure the same part many times, using the same gage)</li>
<li>operators: the operators part of the reproducibility is the operators variation minus the interaction divided by the number of different parts times the replicants (zero if negative)</li>
<li>parts:operators: the interaction part of of the reproducibility is the interaction minus the repeatability divided by the number of replicants (zero if negative)</li>
<li>part-to-part: the variability due to different parts. Ideally, very little should be due to repeatability and reproducibility. Differences between parts should account for most of the variability (when the %Contribution from part-to-part variation is high, the measurement system can reliably distinguish between parts).</li>
</ul>
<p>The sum of the individual variance components equals the total variation.</p>
<p><strong>Criteria for measurement system acceptance:</strong></p>
<p>To evaluate your process variation, compare the Total Gage R&amp;R contribution in the %Contrib column with the values in the list below:</p>
<ul>
<li>Less than 1%: the measurement system is acceptable</li>
<li>Between 1% and 9%: the measurement system is acceptable depending on the application, the cost of the measurement device, cost of repair, or other factors</li>
<li>Greater than 9%: the measurement system is not acceptable and should be improved.</li>
</ul>
</div>
<div id="acceptance-on-sd" class="section level3">
<h3>Acceptance on SD</h3>
<p>The study variation table is established by calculating the square root of each variance (the standard deviation) and by multiplying it by 6 (the six sigma) and then again by comparing each variation with the total variation. Standard deviations are usualy more speaking to the industry professionals. This table also provides a comparison with the specification.</p>
<p><strong>Criteria for measurement system acceptance:</strong></p>
<p>According to the Automotive Industry Action Group <a href="https://www.aiag.org/">AIAG</a> guidelines, if your system variation is less than 10% of the process variation, then it is acceptable.</p>
<p>To evaluate your process variation, compare the Total Gage R&amp;R contribution in the %StudyVar column with the values in the list below:</p>
<ul>
<li>Less than 10%: the measurement system is acceptable</li>
<li>Between 10% and 30%: the measurement system is acceptable depending on the application, the cost of the measurement device, cost of repair, or other factors</li>
<li>Greater that 30%: the measurement system is not acceptable and should be improved.</li>
</ul>
<p>If the p-value for the operator and part interaction is 0.05 or higher, the system removes the interaction because it is not significant and generates a second ANOVA table without the interaction.</p>
<p>The AIAG also states that the number of distinct categories into which the measurement system divides process output should be greater or equal to 5.</p>
<p>The part to part variation is high which is what is expected in a study like this.</p>
<p>In our specific example we observe that the device cannot be accepted as the Study variation for the Total Gage r&amp;R is 38.46% thus much higher than 30%. Furhtermore the number of distinc categories is only of 3.</p>
<p>Finaly to be noted that the total variation rather low when compared with the specification.</p>
<p>In a nutshell two questions are answered:</p>
<ul>
<li><p>can the method be used to assess process performance: no the measurement system variation equals 38.4% of the process variation,</p></li>
<li><p>can the method be used to sort good parts from bad: yes but can be improved, the measurement system variation equals 15.3% of the tolerance.</p></li>
</ul>
</div>
<div id="interaction-plots" class="section level3">
<h3>Interaction plots</h3>
<p>The Six Sigma package plots are similar to the interaction plots provided by other DoE packages but don’t have error bars. These can nevertheless easily be established on a needed basis as in the example below where we’re recreating the axis:operator interaction plot with a +/- 1 standard deviation error bars.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="MSA.html#cb39-1" aria-hidden="true" tabindex="-1"></a>axis_L <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="MSA.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(axis, operator) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="MSA.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vol_mean =</span> <span class="fu">mean</span>(volume_mm3), <span class="at">vol_sd =</span> <span class="fu">sd</span>(volume_mm3)) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="MSA.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> axis, <span class="at">y =</span> vol_mean, <span class="at">color =</span> operator)) <span class="sc">+</span></span>
<span id="cb39-5"><a href="MSA.html#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">group =</span> operator), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb39-6"><a href="MSA.html#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> operator, <span class="at">linetype =</span> operator)) <span class="sc">+</span></span>
<span id="cb39-7"><a href="MSA.html#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> vol_mean <span class="sc">-</span> vol_sd, </span>
<span id="cb39-8"><a href="MSA.html#cb39-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> vol_mean <span class="sc">+</span> vol_sd),</span>
<span id="cb39-9"><a href="MSA.html#cb39-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb39-10"><a href="MSA.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10000</span>, <span class="dv">20000</span>, <span class="dv">10</span>),</span>
<span id="cb39-11"><a href="MSA.html#cb39-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">big.mark =</span> <span class="st">&quot;&#39;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb39-12"><a href="MSA.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;C&quot;</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb39-13"><a href="MSA.html#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># coord_cartesian(ylim = c(17950, 18150)) +</span></span>
<span id="cb39-14"><a href="MSA.html#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">label =</span> <span class="st">&quot;Error bars are +/- 1xSD&quot;</span>, </span>
<span id="cb39-15"><a href="MSA.html#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb39-16"><a href="MSA.html#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">&quot;italic&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-17"><a href="MSA.html#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb39-18"><a href="MSA.html#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;axis volume method validation&quot;</span>,</span>
<span id="cb39-19"><a href="MSA.html#cb39-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Interaction plot - L axis x Operator&quot;</span>,</span>
<span id="cb39-20"><a href="MSA.html#cb39-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb39-21"><a href="MSA.html#cb39-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Volume [mm]&quot;</span>,</span>
<span id="cb39-22"><a href="MSA.html#cb39-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data source: QA Lab&quot;</span>)</span></code></pre></div>
<p><img src="msa_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="MSA.html#cb40-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> axis_L <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="MSA.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(axis, operator) <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="MSA.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vol_mean =</span> <span class="fu">mean</span>(volume_mm3), <span class="at">vol_sd =</span> <span class="fu">sd</span>(volume_mm3))</span></code></pre></div>
</div>
<div id="negative-variations" class="section level3">
<h3>Negative Variations</h3>
<p>Two important limitations exist in the current approach:</p>
<ol style="list-style-type: decimal">
<li>when the operators reproducibility is negative it is converted to zero.</li>
</ol>
<p><span class="citation">(<a href="references.html#ref-Montgomery2012" role="doc-biblioref">Montgomery 2012</a>)</span> in page 557 adresses this case in the following way:</p>
<p><em>Notice that the estimate of one of the variance components,is negative. This is certainly not reasonable because by definition variances are nonnegative. Unfortunately, negative estimates of variance components can result when we use the analysis of variance method of estimation (this is considered one of its drawbacks). We can deal with this negative result in a variety of ways:</em></p>
<p><em>1) one possibility is to assume that the negative estimate means that the variance component is really zero and just set it to zero, leaving the other nonnegative estimates unchanged.</em></p>
<p><em>2) Another approach is to estimate the variance components with a method that assures nonnegative estimates (this can be done with the maximum likelihood approach).</em></p>
<p><em>3) Finally, we could note that the P-value for the interaction term … is very large, take this as evidence that really is zero and that there is no interaction effect, and then fit a reduced model of the form that does not include the interaction term. This is a relatively easy approach and one that often works nearly as well as more sophisticated methods.</em></p>
<p>This final approach is also what the SixSigma package creators have foreseen and if we leave the argument alphaLim empty the non significant terms will be suppressed from the model, the Anova recalculated and the remaining tables updated accordingly. This can be finetuned with the argument alphaLim. Usually we consider a p value of 0.05 but we recommend to start with higher values such as 0.1 or 0.2 to avoid suppressing too quickly the factor which would result in a transfer of their variability into the repeatability.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="MSA.html#cb41-1" aria-hidden="true" tabindex="-1"></a>axis_L_rr <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb41-2"><a href="MSA.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> axis_L, </span>
<span id="cb41-3"><a href="MSA.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> volume_mm3, </span>
<span id="cb41-4"><a href="MSA.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> axis, </span>
<span id="cb41-5"><a href="MSA.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb41-6"><a href="MSA.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="fl">0.2</span>, <span class="co"># instead of 0.05 it is recommended to start higher</span></span>
<span id="cb41-7"><a href="MSA.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>,</span>
<span id="cb41-8"><a href="MSA.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Keyence KEYENCE VR-5200</span><span class="sc">\n</span><span class="st">r&amp;R for Pod Volume&quot;</span>,</span>
<span id="cb41-9"><a href="MSA.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Pod L&quot;</span>,</span>
<span id="cb41-10"><a href="MSA.html#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">17750</span>,</span>
<span id="cb41-11"><a href="MSA.html#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">18250</span></span>
<span id="cb41-12"><a href="MSA.html#cb41-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
axis            4 170707   42677 271.450 &lt;2e-16
operator        2   1313     657   4.176 0.0167
axis:operator   8   1122     140   0.892 0.5237
Repeatability 210  33016     157               
Total         224 206158                       

alpha for removing interaction: 0.2 


Reduced model (without interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
axis            4 170707   42677 272.526 &lt;2e-16
operator        2   1313     657   4.193 0.0163
Repeatability 218  34138     157               
Total         224 206158                       

Gage R&amp;R

                      VarComp %Contrib
Total Gage R&amp;R     163.262567    14.73
  Repeatability    156.596490    14.13
  Reproducibility    6.666077     0.60
    operator         6.666077     0.60
Part-To-Part       944.889591    85.27
Total Variation   1108.152158   100.00

                      VarComp    StdDev  StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     163.262567 12.777424  76.66454     38.38      15.33
  Repeatability    156.596490 12.513852  75.08311     37.59      15.02
  Reproducibility    6.666077  2.581875  15.49125      7.76       3.10
    operator         6.666077  2.581875  15.49125      7.76       3.10
Part-To-Part       944.889591 30.739056 184.43434     92.34      36.89
Total Variation   1108.152158 33.288919 199.73352    100.00      39.95

Number of Distinct Categories = 3 </code></pre>
<p><img src="msa_files/figure-html/unnamed-chunk-16-1.png" width="768" /></p>
<p>In our case when comparing the total gage r&amp;R with and without the interaction we see it changing from 38.46% to 38.38%.</p>
</div>
<div id="beyond-two-factors" class="section level3">
<h3>Beyond two factors</h3>
<ol start="2" style="list-style-type: decimal">
<li>The ss.rr function only accepts 2 factors so it is not possible to obtain all the tables and plots with for example the day as a factor.
This significantly limits the calculation of the total uncertainty for some measurement methods. Next steps in our study will be to prepare an R function to deal with more than 2 factors.</li>
</ol>
</div>
<div id="conclusions" class="section level3">
<h3>Conclusions</h3>
<p>The Six Sigma package r&amp;R approach can be applied with no issue to simple cases with 2 factors (e.g. operators and parts) where the Variance Component of the Reproducibility is not negative.</p>
<p>The intepretation and acceptance criteria have been adapted from the <a href="https://support.minitab.com/en-us/minitab/18/help-and-how-to/quality-and-process-improvement/measurement-system-analysis/how-to/gage-study/crossed-gage-r-r-study/interpret-the-results/key-results/">Minitab help site</a> that includes the typical industry interpretation and tresholds.</p>
</div>
</div>
<div id="uncertainty" class="section level2">
<h2>Uncertainty</h2>
<p>A final step in the validation of our measurement device is now the calculation of the total measurement uncertainty.</p>
<p>In some reports the terminology uncertainty is prefered instead of gage r&amp;R.
In this case the formula usually used to evaluate the measurement uncertainty is:</p>
<p><span class="math display">\[
u^2=u_{repeat.}^2+ u_{reprod.}^2+ u_{cal.}^2
\]</span></p>
<p>where the repeatability and reproducibility members can be obtained from the variances calculated in the r&amp;R study</p>
<p><span class="math display">\[
u_{reprod.}^2 = σ_{reprod.}^2\\
u_{repeat.}^2 = σ_{repeat.}^2
\]</span></p>
<p>From the variance components table in our example we have:</p>
<p><span class="math display">\[
σ_{repeat.}^2 = 157.21\\
σ_{reprod.}^2 = 6.89
\]</span></p>
<p>The calibration uncertainty has in this case been obtained from the equipment notice:</p>
<p><span class="math display">\[
u_(cal) = 200\mu m^3 &lt;=&gt; 200e^{-9} &lt;=&gt; 2.10^{-7}mm^3 &lt;=&gt; 4.10^{-14}
\]</span></p>
<p>we consider this value negligible, thus we have a final uncertainty of:</p>
<p><span class="math display">\[
u = \sqrt[2]{157.21 + 6.89}\\
u = 12.81015
\]</span></p>
<p>Finally what is usually reported is the expanded uncertainty corresponding to 2 standard deviations. To be recalled that +/- 2 std corresponds to 95% of the values when a repeative measurement is done. In this case we have <span class="math inline">\(U = 2*u\)</span> which rounded gives <span class="math inline">\(U = 25.6\)</span></p>
<p>For a specific measurement of say 18’000 we then say: the axis volume is 18’000 mm^3 plus or minus
25.6 mm3, at the 95 percent confidence level. Or written in short 18’000 mm^3 ± 25.6 mm^3, at a level of confidence of 95%</p>
<p>Knowing that the specification is [17’750; 18’250] <span class="math inline">\(mm^3\)</span> we have a range of 500 which when compared to 2 * 25.6 = 51.2 is aproximately 10 times. This is another way of looking into the ratio between method variation and specification, that was in fact 15.37% in the study variation table because there it was considered 3 standard deviations.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="design-for-six-sigma.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="DOE.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["industRialds.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
