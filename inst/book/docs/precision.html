<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Precision | industRial data science" />
<meta property="og:type" content="book" />

<meta property="og:image" content="img/cover3.png" />

<meta name="github-repo" content="J-Ramalho/industRialds" />

<meta name="author" content="João Ramalho" />

<meta name="date" content="2021-03-27" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="Precision | industRial data science">

<title>Precision | industRial data science</title>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-background.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="part"><span><b>I SETUP</b></span></li>
<li><a href="index.html#welcome">Welcome</a></li>
<li><a href="foundations.html#foundations">Foundations</a>
<ul>
<li><a href="foundations.html#six-sigma">Six Sigma</a></li>
<li><a href="foundations.html#statistics">Statistics</a></li>
<li><a href="foundations.html#r-programming">R programming</a></li>
</ul></li>
<li class="part"><span><b>II CASE STUDIES</b></span></li>
<li><a href="s-six-sigma.html#s---six-sigma">6S - Six Sigma</a>
<ul>
<li><a href="pareto.html#pareto">Pareto</a></li>
<li><a href="ishikawa.html#ishikawa">Ishikawa</a></li>
<li><a href="matrix-diagrams.html#matrix-diagrams">Matrix Diagrams</a>
<ul>
<li><a href="matrix-diagrams.html#network-plot">Network plot</a></li>
<li><a href="matrix-diagrams.html#clustering">Clustering</a></li>
</ul></li>
</ul></li>
<li><a href="DOE.html#DOE">DOE - Design of Experiments</a>
<ul>
<li><a href="one-factor-two-levels.html#one-factor-two-levels">One factor two levels</a>
<ul>
<li><a href="one-factor-two-levels.html#two-means-comparison">Two means comparison</a></li>
<li><a href="one-factor-two-levels.html#two-variances-comparison">Two variances comparison</a></li>
<li><a href="one-factor-two-levels.html#sample-size">Sample size</a></li>
</ul></li>
<li><a href="one-factor-multiple-levels.html#one-factor-multiple-levels">One factor multiple levels</a>
<ul>
<li><a href="one-factor-multiple-levels.html#linear-regression">Linear regression</a></li>
<li><a href="one-factor-multiple-levels.html#model-check-residuals">Model check &amp; residuals</a></li>
<li><a href="one-factor-multiple-levels.html#predict">Prediction</a></li>
<li><a href="one-factor-multiple-levels.html#multiple-means-comparison">Multiple means comparison</a></li>
<li><a href="one-factor-multiple-levels.html#pairwise-comparisons">Pairwise comparisons</a></li>
<li><a href="one-factor-multiple-levels.html#means-comparison-covariance">Means comparison &amp; covariance</a></li>
</ul></li>
<li><a href="two-factors-multiple-levels.html#two-factors-multiple-levels">Two factors multiple levels</a>
<ul>
<li><a href="two-factors-multiple-levels.html#linear-regression-with-interactions">Linear regression with interactions</a></li>
<li><a href="two-factors-multiple-levels.html#augmented-model-check">Augmented model check</a></li>
<li><a href="two-factors-multiple-levels.html#interactionPlot">Interaction plot</a></li>
<li><a href="two-factors-multiple-levels.html#effects-significance">Effects significance</a></li>
<li><a href="two-factors-multiple-levels.html#sample-size-calculation">Sample size calculation</a></li>
<li><a href="two-factors-multiple-levels.html#removing-interaction">Removing interaction</a></li>
</ul></li>
<li><a href="multiple-factors.html#multiple-factors">Multiple factors</a>
<ul>
<li><a href="multiple-factors.html#main-effects-plots">Main effects plots</a></li>
<li><a href="multiple-factors.html#model-with-3rd-level-interactions">Model with 3rd level interactions</a></li>
<li><a href="multiple-factors.html#model-adequacy-check">Model adequacy check</a></li>
<li><a href="multiple-factors.html#anova-with-3rd-level-interactions">Anova with 3rd level interactions</a></li>
</ul></li>
<li><a href="factorial-design.html#factorial-design">2^2 factorial design</a>
<ul>
<li><a href="factorial-design.html#linear-model-with-and--">Linear model with + and -</a></li>
<li><a href="factorial-design.html#anova-with-and--">Anova with + and -</a></li>
<li><a href="factorial-design.html#interaction-plots-with-sd-bars">Interaction plots with sd bars</a></li>
<li><a href="factorial-design.html#outputs-correlation">Outputs correlation</a></li>
<li><a href="factorial-design.html#levels-coding-with-1-and--1">Levels coding with +1 and -1</a></li>
<li><a href="factorial-design.html#model-with-1-and--1">Model with 1 and -1</a></li>
<li><a href="factorial-design.html#prediction-with-1-and--1">Prediction with 1 and -1</a></li>
</ul></li>
<li><a href="factorial-design-1.html#factorial-design-1">2^3 factorial design</a>
<ul>
<li><a href="factorial-design-1.html#main-effects-box-plots">Main effects box plots</a></li>
<li><a href="factorial-design-1.html#converting-levels-to-numeric">Converting levels to numeric</a></li>
<li><a href="factorial-design-1.html#model-with-numeric-levels">Model with numeric levels</a></li>
<li><a href="factorial-design-1.html#prediction-with-numeric-levels">Prediction with numeric levels</a></li>
<li><a href="factorial-design-1.html#reduced-model-removing-levels">Reduced model (removing levels)</a></li>
</ul></li>
<li><a href="k-factorial-design.html#k-factorial-design">2^k factorial design</a>
<ul>
<li><a href="k-factorial-design.html#combinations">Combinations</a></li>
<li><a href="k-factorial-design.html#coded-vs-natural-variables">Coded vs natural variables</a></li>
</ul></li>
<li><a href="k-single-replicate-design.html#k-single-replicate-design">2^k single replicate design</a>
<ul>
<li><a href="k-single-replicate-design.html#main-effects-data-plots">Main effects data plots</a></li>
<li><a href="k-single-replicate-design.html#linear-model-single-replicate">Linear model single replicate</a></li>
<li><a href="k-single-replicate-design.html#anova-single-replicate">Anova single replicate</a></li>
<li><a href="k-single-replicate-design.html#linear-regression---plot-of-effects">Linear regression - Plot of effects</a></li>
<li><a href="k-single-replicate-design.html#anova-reduced-model-significant-effects-only">Anova reduced model (significant effects only)</a></li>
<li><a href="k-single-replicate-design.html#reduced-model">Reduced model</a></li>
<li><a href="k-single-replicate-design.html#reduced-model-check">Reduced model check</a></li>
</ul></li>
</ul></li>
<li><a href="MSA.html#MSA">MSA - Measurement System Analysis</a>
<ul>
<li><a href="robustness.html#robustness">Robustness</a></li>
<li><a href="linearity.html#linearity">Linearity</a>
<ul>
<li><a href="linearity.html#plot-of-bias-data">Plot of bias data</a></li>
<li><a href="linearity.html#model-of-bias-vs-reference-value">Model of bias vs reference value</a></li>
<li><a href="linearity.html#model-of-bias-check">Model of bias check</a></li>
</ul></li>
<li><a href="trueness.html#trueness">Trueness</a></li>
<li><a href="precision.html#precision">Precision</a>
<ul>
<li><a href="precision.html#base-anova">Base Anova</a></li>
<li><a href="precision.html#study">Study</a></li>
<li><a href="precision.html#acceptance-on-variance">Acceptance on Variance</a></li>
<li><a href="precision.html#acceptance-on-sd">Acceptance on SD</a></li>
<li><a href="precision.html#interaction-plots">Interaction plots</a></li>
<li><a href="precision.html#negative-variations">Negative Variations</a></li>
<li><a href="precision.html#beyond-two-factors">Beyond two factors</a></li>
<li><a href="precision.html#conclusions">Conclusions</a></li>
</ul></li>
<li><a href="uncertainty.html#uncertainty">Uncertainty</a></li>
</ul></li>
<li><a href="SPC.html#SPC">SPC - Statistical Process Control</a>
<ul>
<li><a href="control-charts.html#control-charts">Control charts</a>
<ul>
<li><a href="control-charts.html#xbar-and-r-charts">xbar and R charts</a></li>
</ul></li>
<li><a href="process-capability.html#process-capability">Process Capability</a>
<ul>
<li><a href="process-capability.html#out-of-specification">Out of specification</a></li>
<li><a href="process-capability.html#cpk-index">Cpk index</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III TOOLBOX</b></span></li>
<li><a href="r-functions-index.html#r-functions-index">R functions index</a></li>
<li><a href="r-packages.html#r-packages">R Packages</a>
<ul>
<li><a href="installation.html#installation">Installation</a></li>
<li><a href="domain-packages.html#domain-packages">Domain packages</a>
<ul>
<li><a href="domain-packages.html#industrial">industRial</a></li>
<li><a href="domain-packages.html#six-sigma-1">six sigma</a></li>
<li><a href="domain-packages.html#qcc">qcc</a></li>
<li><a href="domain-packages.html#qicharts2">qicharts2</a></li>
</ul></li>
<li><a href="other-packages.html#other-packages">Other packages</a></li>
<li><a href="r-session-info.html#r-session-info">R Session info</a></li>
</ul></li>
<li><a href="r-datasets.html#r-datasets">R Datasets</a></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="precision" class="section level2">
<h2>Precision</h2>
<p>reproductibility &amp; reproducibility</p>
<p><strong>Objective</strong></p>
<p>The objective of this document is to assess the scope of utilisation of the r&amp;R for a measurement method using the Six Sigma package from R. A comparison with base R anova and with Minitab r&amp;R is also done. This report is accompaigned by a “CheatSheet” excel file with formulas allowing to understand and easily confirm the SixSigma package calculations.</p>
<p>The randomization is an important aspect that was not mentionned here but that needs to be taken in consideration in the data collection.</p>
<p>Data loading</p>
<p>We use here the data from the axis volume method validation:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="precision.html#cb227-1" aria-hidden="true" tabindex="-1"></a>axis <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;../industRial/data-raw/rnR_case_study.xlsx&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb227-2"><a href="precision.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">size =</span> <span class="fu">as_factor</span>(size)) <span class="sc">%&gt;%</span></span>
<span id="cb227-3"><a href="precision.html#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">axis =</span> <span class="fu">as_factor</span>(axis)) <span class="sc">%&gt;%</span></span>
<span id="cb227-4"><a href="precision.html#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">operator =</span> <span class="fu">as_factor</span>(operator)) <span class="sc">%&gt;%</span></span>
<span id="cb227-5"><a href="precision.html#cb227-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">fct_inorder</span>(day))</span></code></pre></div>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="precision.html#cb228-1" aria-hidden="true" tabindex="-1"></a>axis_L <span class="ot">&lt;-</span> axis <span class="sc">%&gt;%</span></span>
<span id="cb228-2"><a href="precision.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(size <span class="sc">==</span> <span class="st">&quot;L&quot;</span>)</span></code></pre></div>
<div id="base-anova" class="section level3">
<h3>Base Anova</h3>
<p>We’re feeding the aov function from the stats package with operator and axis factors.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="precision.html#cb229-1" aria-hidden="true" tabindex="-1"></a>axis_L_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb229-2"><a href="precision.html#cb229-2" aria-hidden="true" tabindex="-1"></a>  volume_mm3 <span class="sc">~</span> (</span>
<span id="cb229-3"><a href="precision.html#cb229-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># main effects</span></span>
<span id="cb229-4"><a href="precision.html#cb229-4" aria-hidden="true" tabindex="-1"></a>    axis <span class="sc">+</span></span>
<span id="cb229-5"><a href="precision.html#cb229-5" aria-hidden="true" tabindex="-1"></a>    operator <span class="sc">+</span></span>
<span id="cb229-6"><a href="precision.html#cb229-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2nd order interactions</span></span>
<span id="cb229-7"><a href="precision.html#cb229-7" aria-hidden="true" tabindex="-1"></a>    operator<span class="sc">:</span>axis</span>
<span id="cb229-8"><a href="precision.html#cb229-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb229-9"><a href="precision.html#cb229-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> axis_L</span>
<span id="cb229-10"><a href="precision.html#cb229-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb229-11"><a href="precision.html#cb229-11" aria-hidden="true" tabindex="-1"></a>axis_L_aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(axis_L_lm)</span>
<span id="cb229-12"><a href="precision.html#cb229-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(axis_L_aov)</span></code></pre></div>
<pre><code>               Df Sum Sq Mean Sq F value Pr(&gt;F)    
axis            4 170707   42677 271.450 &lt;2e-16 ***
operator        2   1313     657   4.176 0.0167 *  
axis:operator   8   1122     140   0.892 0.5237    
Residuals     210  33016     157                   
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<ul>
<li>axis (Part): The variation that comes from the parts, with 5 levels in this case</li>
<li>operator: The variation that comes from the operators, with 3 levels in this case</li>
<li>Operator*Part: The variation that comes from the operator and part interaction. An interaction exists when an operator measures different parts differently.</li>
<li>repeatability (or error, or residuals): The variation that is not explained by part, operator, or the operator and part interaction.
Variance</li>
<li>n: number of replicants, 15 in this case (not presented in the table)</li>
</ul>
<p>These are used for establishing the Variance Components and Study Variation tables that are exactly the same that are obtained with Minitab.</p>
</div>
<div id="study" class="section level3">
<h3>Study</h3>
<p>Below we’re recreating the same analysis with the ss.rr function from the Six Sigma package. As the function allows to input the limits we’re also providing in the function arguments the current upper and lower limit of the specification.</p>
<p>axis L 18’000mm3 +/- 250mm3 (18.0ml +/- 0.25ml)</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="precision.html#cb231-1" aria-hidden="true" tabindex="-1"></a>axis_L_rr <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb231-2"><a href="precision.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> axis_L, </span>
<span id="cb231-3"><a href="precision.html#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> volume_mm3, </span>
<span id="cb231-4"><a href="precision.html#cb231-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> axis, </span>
<span id="cb231-5"><a href="precision.html#cb231-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb231-6"><a href="precision.html#cb231-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="dv">1</span>,</span>
<span id="cb231-7"><a href="precision.html#cb231-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>, <span class="co"># very important otherwise F test not identical to base aov</span></span>
<span id="cb231-8"><a href="precision.html#cb231-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Scanner x2000</span><span class="sc">\n</span><span class="st">r&amp;R for axis Volume&quot;</span>,</span>
<span id="cb231-9"><a href="precision.html#cb231-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;axis L&quot;</span>,</span>
<span id="cb231-10"><a href="precision.html#cb231-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">17750</span>,</span>
<span id="cb231-11"><a href="precision.html#cb231-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">18250</span></span>
<span id="cb231-12"><a href="precision.html#cb231-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
axis            4 170707   42677 271.450 &lt;2e-16
operator        2   1313     657   4.176 0.0167
axis:operator   8   1122     140   0.892 0.5237
Repeatability 210  33016     157               
Total         224 206158                       

alpha for removing interaction: 1 

Gage R&amp;R

                     VarComp %Contrib
Total Gage R&amp;R     164.10066    14.79
  Repeatability    157.21730    14.17
  Reproducibility    6.88336     0.62
    operator         6.88336     0.62
axis:operator        0.00000     0.00
Part-To-Part       945.25173    85.21
Total Variation   1109.35239   100.00

                     VarComp    StdDev  StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     164.10066 12.810178  76.86107     38.46      15.37
  Repeatability    157.21730 12.538632  75.23179     37.65      15.05
  Reproducibility    6.88336  2.623616  15.74170      7.88       3.15
    operator         6.88336  2.623616  15.74170      7.88       3.15
axis:operator        0.00000  0.000000   0.00000      0.00       0.00
Part-To-Part       945.25173 30.744946 184.46968     92.31      36.89
Total Variation   1109.35239 33.306942 199.84165    100.00      39.97

Number of Distinct Categories = 3 </code></pre>
<p><img src="msa_files/figure-html/unnamed-chunk-13-1.png" width="80%"  /></p>
<p>We can observe that the SixSigma package recreates exactly the same anova table, just calling Repeatability to the Residuals and adding an additional line with the total degrees of freedom and the total sum of squares.</p>
<p>Note that the argument alphaLim has been set to 1 to avoid suppressing the interaction which is in this case non significative.</p>
</div>
<div id="acceptance-on-variance" class="section level3">
<h3>Acceptance on Variance</h3>
<p>Variance components assess the amount of variation contributed by each source of measurement error, plus the contribution of part-to-part variability.</p>
<ul>
<li>total gage r&amp;R: the sum of the repeatability and the reproducibility variance components</li>
<li>repeatability: how much variability is caused by the measurement device (the same operator measures the same part many times, using the same gage). The repeteability can be measured directly from the Anova table from the residual mean squares</li>
<li>reproducibility: how much variation is caused by the differences between operators (different operators measure the same part many times, using the same gage)</li>
<li>operators: the operators part of the reproducibility is the operators variation minus the interaction divided by the number of different parts times the replicants (zero if negative)</li>
<li>parts:operators: the interaction part of of the reproducibility is the interaction minus the repeatability divided by the number of replicants (zero if negative)</li>
<li>part-to-part: the variability due to different parts. Ideally, very little should be due to repeatability and reproducibility. Differences between parts should account for most of the variability (when the %Contribution from part-to-part variation is high, the measurement system can reliably distinguish between parts).</li>
</ul>
<p>The sum of the individual variance components equals the total variation.</p>
<p><strong>Criteria for measurement system acceptance:</strong></p>
<p>To evaluate your process variation, compare the Total Gage R&amp;R contribution in the %Contrib column with the values in the list below:</p>
<ul>
<li>Less than 1%: the measurement system is acceptable</li>
<li>Between 1% and 9%: the measurement system is acceptable depending on the application, the cost of the measurement device, cost of repair, or other factors</li>
<li>Greater than 9%: the measurement system is not acceptable and should be improved.</li>
</ul>
</div>
<div id="acceptance-on-sd" class="section level3">
<h3>Acceptance on SD</h3>
<p>The study variation table is established by calculating the square root of each variance (the standard deviation) and by multiplying it by 6 (the six sigma) and then again by comparing each variation with the total variation. Standard deviations are usualy more speaking to the industry professionals. This table also provides a comparison with the specification.</p>
<p><strong>Criteria for measurement system acceptance:</strong></p>
<p>According to the Automotive Industry Action Group <a href="https://www.aiag.org/">AIAG</a> guidelines, if your system variation is less than 10% of the process variation, then it is acceptable.</p>
<p>To evaluate your process variation, compare the Total Gage R&amp;R contribution in the %StudyVar column with the values in the list below:</p>
<ul>
<li>Less than 10%: the measurement system is acceptable</li>
<li>Between 10% and 30%: the measurement system is acceptable depending on the application, the cost of the measurement device, cost of repair, or other factors</li>
<li>Greater that 30%: the measurement system is not acceptable and should be improved.</li>
</ul>
<p>If the p-value for the operator and part interaction is 0.05 or higher, the system removes the interaction because it is not significant and generates a second ANOVA table without the interaction.</p>
<p>The AIAG also states that the number of distinct categories into which the measurement system divides process output should be greater or equal to 5.</p>
<p>The part to part variation is high which is what is expected in a study like this.</p>
<p>In our specific example we observe that the device cannot be accepted as the Study variation for the Total Gage r&amp;R is 38.46% thus much higher than 30%. Furhtermore the number of distinc categories is only of 3.</p>
<p>Finaly to be noted that the total variation rather low when compared with the specification.</p>
<p>In a nutshell two questions are answered:</p>
<ul>
<li><p>can the method be used to assess process performance: no the measurement system variation equals 38.4% of the process variation,</p></li>
<li><p>can the method be used to sort good parts from bad: yes but can be improved, the measurement system variation equals 15.3% of the tolerance.</p></li>
</ul>
</div>
<div id="interaction-plots" class="section level3">
<h3>Interaction plots</h3>
<p>The Six Sigma package plots are similar to the interaction plots provided by other DoE packages but don’t have error bars. These can nevertheless easily be established on a needed basis as in the example below where we’re recreating the axis:operator interaction plot with a +/- 1 standard deviation error bars.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="precision.html#cb233-1" aria-hidden="true" tabindex="-1"></a>axis_L <span class="sc">%&gt;%</span></span>
<span id="cb233-2"><a href="precision.html#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(axis, operator) <span class="sc">%&gt;%</span></span>
<span id="cb233-3"><a href="precision.html#cb233-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vol_mean =</span> <span class="fu">mean</span>(volume_mm3), <span class="at">vol_sd =</span> <span class="fu">sd</span>(volume_mm3)) <span class="sc">%&gt;%</span></span>
<span id="cb233-4"><a href="precision.html#cb233-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> axis, <span class="at">y =</span> vol_mean, <span class="at">color =</span> operator)) <span class="sc">+</span></span>
<span id="cb233-5"><a href="precision.html#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">group =</span> operator), <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb233-6"><a href="precision.html#cb233-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> operator, <span class="at">linetype =</span> operator)) <span class="sc">+</span></span>
<span id="cb233-7"><a href="precision.html#cb233-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> vol_mean <span class="sc">-</span> vol_sd, </span>
<span id="cb233-8"><a href="precision.html#cb233-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax =</span> vol_mean <span class="sc">+</span> vol_sd),</span>
<span id="cb233-9"><a href="precision.html#cb233-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">width =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb233-10"><a href="precision.html#cb233-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10000</span>, <span class="dv">20000</span>, <span class="dv">10</span>),</span>
<span id="cb233-11"><a href="precision.html#cb233-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">big.mark =</span> <span class="st">&quot;&#39;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb233-12"><a href="precision.html#cb233-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;C&quot;</span>, <span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb233-13"><a href="precision.html#cb233-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># coord_cartesian(ylim = c(17950, 18150)) +</span></span>
<span id="cb233-14"><a href="precision.html#cb233-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">label =</span> <span class="st">&quot;Error bars are +/- 1xSD&quot;</span>, </span>
<span id="cb233-15"><a href="precision.html#cb233-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb233-16"><a href="precision.html#cb233-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">&quot;italic&quot;</span>) <span class="sc">+</span></span>
<span id="cb233-17"><a href="precision.html#cb233-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb233-18"><a href="precision.html#cb233-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;axis volume method validation&quot;</span>,</span>
<span id="cb233-19"><a href="precision.html#cb233-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Interaction plot - L axis x Operator&quot;</span>,</span>
<span id="cb233-20"><a href="precision.html#cb233-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb233-21"><a href="precision.html#cb233-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Volume [mm]&quot;</span>,</span>
<span id="cb233-22"><a href="precision.html#cb233-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data source: QA Lab&quot;</span>)</span></code></pre></div>
<p><img src="msa_files/figure-html/unnamed-chunk-14-1.png" width="80%"  /></p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="precision.html#cb234-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> axis_L <span class="sc">%&gt;%</span></span>
<span id="cb234-2"><a href="precision.html#cb234-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(axis, operator) <span class="sc">%&gt;%</span></span>
<span id="cb234-3"><a href="precision.html#cb234-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vol_mean =</span> <span class="fu">mean</span>(volume_mm3), <span class="at">vol_sd =</span> <span class="fu">sd</span>(volume_mm3))</span></code></pre></div>
</div>
<div id="negative-variations" class="section level3">
<h3>Negative Variations</h3>
<p>Two important limitations exist in the current approach:</p>
<ol style="list-style-type: decimal">
<li>when the operators reproducibility is negative it is converted to zero.</li>
</ol>
<p><span class="citation">(<label for="tufte-mn-7" class="margin-toggle">&#8853;</label><input type="checkbox" id="tufte-mn-7" class="margin-toggle">Montgomery 2012<span class="marginnote">Montgomery, Douglas C. 2012. <em>Design and Analysis of Experiments</em>. 8th ed. Wiley.</span>)</span> in page 557 adresses this case in the following way:</p>
<p><em>Notice that the estimate of one of the variance components,is negative. This is certainly not reasonable because by definition variances are nonnegative. Unfortunately, negative estimates of variance components can result when we use the analysis of variance method of estimation (this is considered one of its drawbacks). We can deal with this negative result in a variety of ways:</em></p>
<p><em>1) one possibility is to assume that the negative estimate means that the variance component is really zero and just set it to zero, leaving the other nonnegative estimates unchanged.</em></p>
<p><em>2) Another approach is to estimate the variance components with a method that assures nonnegative estimates (this can be done with the maximum likelihood approach).</em></p>
<p><em>3) Finally, we could note that the P-value for the interaction term … is very large, take this as evidence that really is zero and that there is no interaction effect, and then fit a reduced model of the form that does not include the interaction term. This is a relatively easy approach and one that often works nearly as well as more sophisticated methods.</em></p>
<p>This final approach is also what the SixSigma package creators have foreseen and if we leave the argument alphaLim empty the non significant terms will be suppressed from the model, the Anova recalculated and the remaining tables updated accordingly. This can be finetuned with the argument alphaLim. Usually we consider a p value of 0.05 but we recommend to start with higher values such as 0.1 or 0.2 to avoid suppressing too quickly the factor which would result in a transfer of their variability into the repeatability.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="precision.html#cb235-1" aria-hidden="true" tabindex="-1"></a>axis_L_rr <span class="ot">&lt;-</span> <span class="fu">ss.rr</span>(</span>
<span id="cb235-2"><a href="precision.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> axis_L, </span>
<span id="cb235-3"><a href="precision.html#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">var =</span> volume_mm3, </span>
<span id="cb235-4"><a href="precision.html#cb235-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">part =</span> axis, </span>
<span id="cb235-5"><a href="precision.html#cb235-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">appr =</span> operator, </span>
<span id="cb235-6"><a href="precision.html#cb235-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">alphaLim =</span> <span class="fl">0.2</span>, <span class="co"># instead of 0.05 it is recommended to start higher</span></span>
<span id="cb235-7"><a href="precision.html#cb235-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">errorTerm =</span> <span class="st">&quot;repeatability&quot;</span>,</span>
<span id="cb235-8"><a href="precision.html#cb235-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">&quot;Keyence KEYENCE VR-5200</span><span class="sc">\n</span><span class="st">r&amp;R for Pod Volume&quot;</span>,</span>
<span id="cb235-9"><a href="precision.html#cb235-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">&quot;Pod L&quot;</span>,</span>
<span id="cb235-10"><a href="precision.html#cb235-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lsl =</span> <span class="dv">17750</span>,</span>
<span id="cb235-11"><a href="precision.html#cb235-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">usl =</span> <span class="dv">18250</span></span>
<span id="cb235-12"><a href="precision.html#cb235-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Complete model (with interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
axis            4 170707   42677 271.450 &lt;2e-16
operator        2   1313     657   4.176 0.0167
axis:operator   8   1122     140   0.892 0.5237
Repeatability 210  33016     157               
Total         224 206158                       

alpha for removing interaction: 0.2 


Reduced model (without interaction):

               Df Sum Sq Mean Sq F value Pr(&gt;F)
axis            4 170707   42677 272.526 &lt;2e-16
operator        2   1313     657   4.193 0.0163
Repeatability 218  34138     157               
Total         224 206158                       

Gage R&amp;R

                      VarComp %Contrib
Total Gage R&amp;R     163.262567    14.73
  Repeatability    156.596490    14.13
  Reproducibility    6.666077     0.60
    operator         6.666077     0.60
Part-To-Part       944.889591    85.27
Total Variation   1108.152158   100.00

                      VarComp    StdDev  StudyVar %StudyVar %Tolerance
Total Gage R&amp;R     163.262567 12.777424  76.66454     38.38      15.33
  Repeatability    156.596490 12.513852  75.08311     37.59      15.02
  Reproducibility    6.666077  2.581875  15.49125      7.76       3.10
    operator         6.666077  2.581875  15.49125      7.76       3.10
Part-To-Part       944.889591 30.739056 184.43434     92.34      36.89
Total Variation   1108.152158 33.288919 199.73352    100.00      39.95

Number of Distinct Categories = 3 </code></pre>
<p><img src="msa_files/figure-html/unnamed-chunk-16-1.png" width="80%"  /></p>
<p>In our case when comparing the total gage r&amp;R with and without the interaction we see it changing from 38.46% to 38.38%.</p>
</div>
<div id="beyond-two-factors" class="section level3">
<h3>Beyond two factors</h3>
<ol start="2" style="list-style-type: decimal">
<li>The ss.rr function only accepts 2 factors so it is not possible to obtain all the tables and plots with for example the day as a factor.
This significantly limits the calculation of the total uncertainty for some measurement methods. Next steps in our study will be to prepare an R function to deal with more than 2 factors.</li>
</ol>
</div>
<div id="conclusions" class="section level3">
<h3>Conclusions</h3>
<p>The Six Sigma package r&amp;R approach can be applied with no issue to simple cases with 2 factors (e.g. operators and parts) where the Variance Component of the Reproducibility is not negative.</p>
<p>The intepretation and acceptance criteria have been adapted from the <a href="https://support.minitab.com/en-us/minitab/18/help-and-how-to/quality-and-process-improvement/measurement-system-analysis/how-to/gage-study/crossed-gage-r-r-study/interpret-the-results/key-results/">Minitab help site</a> that includes the typical industry interpretation and tresholds.</p>
</div>
</div>
<p style="text-align: center;">
<a href="trueness.html"><button class="btn btn-default">Previous</button></a>
<a href="uncertainty.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



</body>
</html>
